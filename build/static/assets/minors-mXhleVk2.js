import{aa as o,R as d,P as r}from"./index-BR5oj7Uf.js";import{a as c,d as u}from"./utils-BW_ZrKIj.js";function f(a,e){try{const t=o(a);return o(e||new Date().toString()).diff(t,"year")}catch{return 0}}function y(a){try{return o(a).format("YYYY/MM/DD")}catch{return a}}const h={warningStatus:["绿","黄","橙","红"],gender:["男","女"],guardianGender:["男","女"],registratedWuhou:["是","否"]},w={warningStatus:"预警状态",street:"街道",community:"社区",age:"年龄",gender:"性别",tempProtect:"临时庇护"};function i(a){const e=Object.keys(a).reduce((t,n)=>{const s=a[n];return typeof s<"u"?t[n]=s:t[n]="",t},Object.create(null));for(const t of["birthday","guardianBirthday"])(typeof a[t]=="string"||a[t]instanceof Date)&&(e[t]=y(a[t]));for(const t of["age","guardianAge"]){const n=a[t.replace("age","birthday").replace("Age","Birthday")];(typeof n=="string"||n instanceof Date)&&(e[t]=f(n))}return e}const m={id:"",name:"",registratedWuhou:0,guardianName:"",guardianBirthday:"",guardianAge:0,guardianContact:"",guardianGender:0,relationship:"",street:"",community:"",warningStatus:0,age:0,birthday:"",gender:0,school:"",grade:"",contact:"",tempProtect:!1,detail:"",psyTest:{synthesisPsyHealth:[],anxiety:[],depression:[],traumaReaction:[],socialAnxiety:[],intellect:[],personality:[],insomnia:[],other:[]},psyCounsel:[],lifeEvent:"",focus:[],familyGuard:[],otherServer:[],serveCount:""};function p(){const a=c(),e=d(m);return e.id=a,e}function S(a){return o(a).format("YYYY/MM")}async function P(a,e){const t=await r(`/api/data/${a==="in"?"record-in":"record-out"}`,{method:"POST",data:{date:e}});return t&&t.status===200&&t.data&&t.data.success?t.data.data:0}async function I(a){const e=p(),t=Object.assign(e,a),n=await r("/api/data/new-minor",{method:"POST",data:i(t)});return n&&n.status===200&&n.data&&n.data.success?0:1}async function M(a,e){const t=await r(`/api/data/edit-minor?id=${a}`,{method:"POST",data:i(e)});return t&&t.status===200&&t.data&&t.data.success?0:1}async function O(a,e){const t=await r("/api/data/get-minors",{method:"POST",data:{searchVal:a,...e}});return t&&t.status===200&&t.data&&t.data.success?t.data.data:[]}async function T(a){const e=await r(`/api/data/remove-minor?id=${a}`,{method:"POST"});return e&&e.status===200&&e.data&&e.data.success?0:1}async function $(a){u(`/api/data/download-minor?id=${a}`)}async function Y(a,e,t){const n=await r(`/api/data/new-psytest?id=${a}&key=${e}`,{method:"POST",data:t});return n&&n.status===200&&n.data&&n.data.success?0:1}async function b(a,e,t,n){const s=await r(`/api/data/edit-psytest?id=${a}&key=${e}&edit=${t}`,{method:"POST",data:n});return s&&s.status===200&&s.data&&s.data.success?0:1}export{w as S,O as a,I as b,T as c,$ as d,Y as e,b as f,p as g,S as h,P as i,M as m,h as r};
