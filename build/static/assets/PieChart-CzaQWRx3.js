import{b6 as B,b7 as ot,ab as Ae,b8 as Lt,z as Ct,a_ as st,b9 as lt,ba as Be,F as Yt,aO as Ut,aL as Ht,bb as Xt,bc as $t,bd as ve,ah as de,G as He,be as jt,i as Te,Y as qt,aE as ie,bf as ge,e as Y,bg as Kt,E as De,bh as Xe,bi as Zt,bj as Jt,bk as Qt,aY as ea,ax as fe,R as $e,av as he,bl as ta,bm as aa,ai as Qe,_ as ee,j as Ge,B as ra,b1 as _e,bn as na,c as Dt,g as At,bo as ia,aK as et,w as F,x as oa,aj as Tt,N as sa,P as ct,b as Z,bp as la,aB as K,bq as ca,aW as Pe,aC as _t,br as ut,bs as ua,bt as va,bu as pe,ao as ga,bv as fa,as as pa,bw as ha,u as da,bx as ya,v as ma,by as ba,aQ as je,bz as Pt,ap as we,bA as xa,bB as Sa,bC as La,n as Ca,bD as Da,aP as wt,bE as Aa,aU as Ta,aw as _a,aS as Pa,aD as wa,ay as Ia,bF as Ra,p as Ga,f as Oa,bG as Ma,bH as ka,bI as Na,aI as Ba,bJ as Ea,bK as za,b2 as Va,b3 as Wa,b4 as Fa,b5 as Ya}from"./installCanvasRenderer-BWIarJz0.js";import{d as Ua,r as vt,w as Ee,b as Ha,f as gt,i as Xa}from"./index-BR5oj7Uf.js";import{_ as $a}from"./_plugin-vue_export-helper-DlAUqK2U.js";var ce=Math.PI*2,Q=Ht.CMD,ja=["top","right","bottom","left"];function qa(n,a,t,e,r){var o=t.width,i=t.height;switch(n){case"top":e.set(t.x+o/2,t.y-a),r.set(0,-1);break;case"bottom":e.set(t.x+o/2,t.y+i+a),r.set(0,1);break;case"left":e.set(t.x-a,t.y+i/2),r.set(-1,0);break;case"right":e.set(t.x+o+a,t.y+i/2),r.set(1,0);break}}function Ka(n,a,t,e,r,o,i,l,c){i-=n,l-=a;var u=Math.sqrt(i*i+l*l);i/=u,l/=u;var s=i*t+n,h=l*t+a;if(Math.abs(e-r)%ce<1e-4)return c[0]=s,c[1]=h,u-t;if(o){var f=e;e=ve(r),r=ve(f)}else e=ve(e),r=ve(r);e>r&&(r+=ce);var v=Math.atan2(l,i);if(v<0&&(v+=ce),v>=e&&v<=r||v+ce>=e&&v+ce<=r)return c[0]=s,c[1]=h,u-t;var g=t*Math.cos(e)+n,p=t*Math.sin(e)+a,d=t*Math.cos(r)+n,y=t*Math.sin(r)+a,b=(g-i)*(g-i)+(p-l)*(p-l),m=(d-i)*(d-i)+(y-l)*(y-l);return b<m?(c[0]=g,c[1]=p,Math.sqrt(b)):(c[0]=d,c[1]=y,Math.sqrt(m))}function Ie(n,a,t,e,r,o,i,l){var c=r-n,u=o-a,s=t-n,h=e-a,f=Math.sqrt(s*s+h*h);s/=f,h/=f;var v=c*s+u*h,g=v/f;l&&(g=Math.min(Math.max(g,0),1)),g*=f;var p=i[0]=n+g*s,d=i[1]=a+g*h;return Math.sqrt((p-r)*(p-r)+(d-o)*(d-o))}function It(n,a,t,e,r,o,i){t<0&&(n=n+t,t=-t),e<0&&(a=a+e,e=-e);var l=n+t,c=a+e,u=i[0]=Math.min(Math.max(r,n),l),s=i[1]=Math.min(Math.max(o,a),c);return Math.sqrt((u-r)*(u-r)+(s-o)*(s-o))}var X=[];function Za(n,a,t){var e=It(a.x,a.y,a.width,a.height,n.x,n.y,X);return t.set(X[0],X[1]),e}function Ja(n,a,t){for(var e=0,r=0,o=0,i=0,l,c,u=1/0,s=a.data,h=n.x,f=n.y,v=0;v<s.length;){var g=s[v++];v===1&&(e=s[v],r=s[v+1],o=e,i=r);var p=u;switch(g){case Q.M:o=s[v++],i=s[v++],e=o,r=i;break;case Q.L:p=Ie(e,r,s[v],s[v+1],h,f,X,!0),e=s[v++],r=s[v++];break;case Q.C:p=$t(e,r,s[v++],s[v++],s[v++],s[v++],s[v],s[v+1],h,f,X),e=s[v++],r=s[v++];break;case Q.Q:p=Xt(e,r,s[v++],s[v++],s[v],s[v+1],h,f,X),e=s[v++],r=s[v++];break;case Q.A:var d=s[v++],y=s[v++],b=s[v++],m=s[v++],L=s[v++],x=s[v++];v+=1;var C=!!(1-s[v++]);l=Math.cos(L)*b+d,c=Math.sin(L)*m+y,v<=1&&(o=l,i=c);var A=(h-d)*m/b+d;p=Ka(d,y,m,L,L+x,C,A,f,X),e=Math.cos(L+x)*b+d,r=Math.sin(L+x)*m+y;break;case Q.R:o=e=s[v++],i=r=s[v++];var S=s[v++],D=s[v++];p=It(o,i,S,D,h,f,X);break;case Q.Z:p=Ie(e,r,o,i,h,f,X,!0),e=o,r=i;break}p<u&&(u=p,t.set(X[0],X[1]))}return u}var $=new B,T=new B,w=new B,q=new B,j=new B;function ft(n,a){if(n){var t=n.getTextGuideLine(),e=n.getTextContent();if(e&&t){var r=n.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],i=r.candidates||ja,l=e.getBoundingRect().clone();l.applyTransform(e.getComputedTransform());var c=1/0,u=r.anchor,s=n.getComputedTransform(),h=s&&Yt([],s),f=a.get("length2")||0;u&&w.copy(u);for(var v=0;v<i.length;v++){var g=i[v];qa(g,0,l,$,q),B.scaleAndAdd(T,$,q,f),T.transform(h);var p=n.getBoundingRect(),d=u?u.distance(T):n instanceof Ut?Ja(T,n.path,w):Za(T,p,w);d<c&&(c=d,T.transform(s),w.transform(s),w.toArray(o[0]),T.toArray(o[1]),$.toArray(o[2]))}Rt(o,a.get("minTurnAngle")),t.setShape({points:o})}}}var Re=[],W=new B;function Rt(n,a){if(a<=180&&a>0){a=a/180*Math.PI,$.fromArray(n[0]),T.fromArray(n[1]),w.fromArray(n[2]),B.sub(q,$,T),B.sub(j,w,T);var t=q.len(),e=j.len();if(!(t<.001||e<.001)){q.scale(1/t),j.scale(1/e);var r=q.dot(j),o=Math.cos(a);if(o<r){var i=Ie(T.x,T.y,w.x,w.y,$.x,$.y,Re,!1);W.fromArray(Re),W.scaleAndAdd(j,i/Math.tan(Math.PI-a));var l=w.x!==T.x?(W.x-T.x)/(w.x-T.x):(W.y-T.y)/(w.y-T.y);if(isNaN(l))return;l<0?B.copy(W,T):l>1&&B.copy(W,w),W.toArray(n[1])}}}}function Qa(n,a,t){if(t<=180&&t>0){t=t/180*Math.PI,$.fromArray(n[0]),T.fromArray(n[1]),w.fromArray(n[2]),B.sub(q,T,$),B.sub(j,w,T);var e=q.len(),r=j.len();if(!(e<.001||r<.001)){q.scale(1/e),j.scale(1/r);var o=q.dot(a),i=Math.cos(t);if(o<i){var l=Ie(T.x,T.y,w.x,w.y,$.x,$.y,Re,!1);W.fromArray(Re);var c=Math.PI/2,u=Math.acos(j.dot(a)),s=c+u-t;if(s>=c)B.copy(W,w);else{W.scaleAndAdd(j,l/Math.tan(Math.PI/2-s));var h=w.x!==T.x?(W.x-T.x)/(w.x-T.x):(W.y-T.y)/(w.y-T.y);if(isNaN(h))return;h<0?B.copy(W,T):h>1&&B.copy(W,w)}W.toArray(n[1])}}}}function ze(n,a,t,e){var r=t==="normal",o=r?n:n.ensureState(t);o.ignore=a;var i=e.get("smooth");i&&i===!0&&(i=.3),o.shape=o.shape||{},i>0&&(o.shape.smooth=i);var l=e.getModel("lineStyle").getLineStyle();r?n.useStyle(l):o.style=l}function er(n,a){var t=a.smooth,e=a.points;if(e)if(n.moveTo(e[0][0],e[0][1]),t>0&&e.length>=3){var r=lt(e[0],e[1]),o=lt(e[1],e[2]);if(!r||!o){n.lineTo(e[1][0],e[1][1]),n.lineTo(e[2][0],e[2][1]);return}var i=Math.min(r,o)*t,l=Be([],e[1],e[0],i/r),c=Be([],e[1],e[2],i/o),u=Be([],l,c,.5);n.bezierCurveTo(l[0],l[1],l[0],l[1],u[0],u[1]),n.bezierCurveTo(c[0],c[1],c[0],c[1],e[2][0],e[2][1])}else for(var s=1;s<e.length;s++)n.lineTo(e[s][0],e[s][1])}function Gt(n,a,t){var e=n.getTextGuideLine(),r=n.getTextContent();if(!r){e&&n.removeTextGuideLine();return}for(var o=a.normal,i=o.get("show"),l=r.ignore,c=0;c<ot.length;c++){var u=ot[c],s=a[u],h=u==="normal";if(s){var f=s.get("show"),v=h?l:Ae(r.states[u]&&r.states[u].ignore,l);if(v||!Ae(f,i)){var g=h?e:e&&e.states[u];g&&(g.ignore=!0),e&&ze(e,!0,u,s);continue}e||(e=new Lt,n.setTextGuideLine(e),!h&&(l||!i)&&ze(e,!0,"normal",a.normal),n.stateProxy&&(e.stateProxy=n.stateProxy)),ze(e,!1,u,s)}}if(e){Ct(e.style,t),e.style.fill=null;var p=o.get("showAbove"),d=n.textGuideLineConfig=n.textGuideLineConfig||{};d.showAbove=p||!1,e.buildPath=er}}function Ot(n,a){a=a||"labelLine";for(var t={normal:n.getModel(a)},e=0;e<st.length;e++){var r=st[e];t[r]=n.getModel([r,a])}return t}function tr(n){if(n){for(var a=[],t=0;t<n.length;t++)a.push(n[t].slice());return a}}function ar(n,a){var t=n.label,e=a&&a.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:tr(e&&e.shape.points)}}var pt=["align","verticalAlign","width","height","fontSize"],V=new jt,Ve=de(),rr=de();function be(n,a,t){for(var e=0;e<t.length;e++){var r=t[e];a[r]!=null&&(n[r]=a[r])}}var xe=["x","y","rotation"],nr=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(a,t,e,r,o){var i=r.style,l=r.__hostTarget,c=l.textConfig||{},u=r.getComputedTransform(),s=r.getBoundingRect().plain();He.applyTransform(s,s,u),u?V.setLocalTransform(u):(V.x=V.y=V.rotation=V.originX=V.originY=0,V.scaleX=V.scaleY=1),V.rotation=ve(V.rotation);var h=r.__hostTarget,f;if(h){f=h.getBoundingRect().plain();var v=h.getComputedTransform();He.applyTransform(f,f,v)}var g=f&&h.getTextGuideLine();this._labelList.push({label:r,labelLine:g,seriesModel:e,dataIndex:a,dataType:t,layoutOptionOrCb:o,layoutOption:null,rect:s,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:g&&g.ignore,x:V.x,y:V.y,scaleX:V.scaleX,scaleY:V.scaleY,rotation:V.rotation,style:{x:i.x,y:i.y,align:i.align,verticalAlign:i.verticalAlign,width:i.width,height:i.height,fontSize:i.fontSize},cursor:r.cursor,attachedPos:c.position,attachedRot:c.rotation}})},n.prototype.addLabelsOfSeries=function(a){var t=this;this._chartViewList.push(a);var e=a.__model,r=e.get("labelLayout");(Te(r)||qt(r).length)&&a.group.traverse(function(o){if(o.ignore)return!0;var i=o.getTextContent(),l=ie(o);i&&!i.disableLabelLayout&&t._addLabel(l.dataIndex,l.dataType,e,i,r)})},n.prototype.updateLayoutConfig=function(a){var t=a.getWidth(),e=a.getHeight();function r(m,L){return function(){ft(m,L)}}for(var o=0;o<this._labelList.length;o++){var i=this._labelList[o],l=i.label,c=l.__hostTarget,u=i.defaultAttr,s=void 0;Te(i.layoutOptionOrCb)?s=i.layoutOptionOrCb(ar(i,c)):s=i.layoutOptionOrCb,s=s||{},i.layoutOption=s;var h=Math.PI/180;c&&c.setTextConfig({local:!1,position:s.x!=null||s.y!=null?null:u.attachedPos,rotation:s.rotate!=null?s.rotate*h:u.attachedRot,offset:[s.dx||0,s.dy||0]});var f=!1;if(s.x!=null?(l.x=ge(s.x,t),l.setStyle("x",0),f=!0):(l.x=u.x,l.setStyle("x",u.style.x)),s.y!=null?(l.y=ge(s.y,e),l.setStyle("y",0),f=!0):(l.y=u.y,l.setStyle("y",u.style.y)),s.labelLinePoints){var v=c.getTextGuideLine();v&&(v.setShape({points:s.labelLinePoints}),f=!1)}var g=Ve(l);g.needsUpdateLabelLine=f,l.rotation=s.rotate!=null?s.rotate*h:u.rotation,l.scaleX=u.scaleX,l.scaleY=u.scaleY;for(var p=0;p<pt.length;p++){var d=pt[p];l.setStyle(d,s[d]!=null?s[d]:u.style[d])}if(s.draggable){if(l.draggable=!0,l.cursor="move",c){var y=i.seriesModel;if(i.dataIndex!=null){var b=i.seriesModel.getData(i.dataType);y=b.getItemModel(i.dataIndex)}l.on("drag",r(c,y.getModel("labelLine")))}}else l.off("drag"),l.cursor=u.cursor}},n.prototype.layout=function(a){var t=a.getWidth(),e=a.getHeight(),r=[];Y(this._labelList,function(c){c.defaultAttr.ignore||r.push(Kt({},c))});var o=De(r,function(c){return c.layoutOption.moveOverlap==="shiftX"}),i=De(r,function(c){return c.layoutOption.moveOverlap==="shiftY"});Xe(o,0,0,t),Xe(i,1,0,e);var l=De(r,function(c){return c.layoutOption.hideOverlap});Zt(l),Jt(l)},n.prototype.processLabelsOverall=function(){var a=this;Y(this._chartViewList,function(t){var e=t.__model,r=t.ignoreLabelLineUpdate,o=e.isAnimationEnabled();t.group.traverse(function(i){if(i.ignore&&!i.forceLabelAnimation)return!0;var l=!r,c=i.getTextContent();!l&&c&&(l=Ve(c).needsUpdateLabelLine),l&&a._updateLabelLine(i,e),o&&a._animateLabels(i,e)})})},n.prototype._updateLabelLine=function(a,t){var e=a.getTextContent(),r=ie(a),o=r.dataIndex;if(e&&o!=null){var i=t.getData(r.dataType),l=i.getItemModel(o),c={},u=i.getItemVisual(o,"style");if(u){var s=i.getVisual("drawType");c.stroke=u[s]}var h=l.getModel("labelLine");Gt(a,Ot(l),c),ft(a,h)}},n.prototype._animateLabels=function(a,t){var e=a.getTextContent(),r=a.getTextGuideLine();if(e&&(a.forceLabelAnimation||!e.ignore&&!e.invisible&&!a.disableLabelAnimation&&!Qt(a))){var o=Ve(e),i=o.oldLayout,l=ie(a),c=l.dataIndex,u={x:e.x,y:e.y,rotation:e.rotation},s=t.getData(l.dataType);if(i){e.attr(i);var f=a.prevStates;f&&($e(f,"select")>=0&&e.attr(o.oldLayoutSelect),$e(f,"emphasis")>=0&&e.attr(o.oldLayoutEmphasis)),he(e,u,t,c)}else if(e.attr(u),!ea(e).valueAnimation){var h=Ae(e.style.opacity,1);e.style.opacity=0,fe(e,{style:{opacity:h}},t,c)}if(o.oldLayout=u,e.states.select){var v=o.oldLayoutSelect={};be(v,u,xe),be(v,e.states.select,xe)}if(e.states.emphasis){var g=o.oldLayoutEmphasis={};be(g,u,xe),be(g,e.states.emphasis,xe)}ta(e,c,s,t,t)}if(r&&!r.ignore&&!r.invisible){var o=rr(r),i=o.oldLayout,p={points:r.shape.points};i?(r.attr({shape:i}),he(r,{shape:p},t)):(r.setShape(p),r.style.strokePercent=0,fe(r,{style:{strokePercent:1}},t)),o.oldLayout=p}},n}(),We=de();function ir(n){n.registerUpdateLifecycle("series:beforeupdate",function(a,t,e){var r=We(t).labelManager;r||(r=We(t).labelManager=new nr),r.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(a,t,e){var r=We(t).labelManager;e.updatedSeries.forEach(function(o){r.addLabelsOfSeries(t.getViewOfSeriesModel(o))}),r.updateLayoutConfig(t),r.layout(t),r.processLabelsOverall()})}function or(n,a){var t=aa(a.get("padding")),e=a.getItemStyle(["color","opacity"]);e.fill=a.get("backgroundColor");var r=new Qe({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:a.get("borderRadius")},style:e,silent:!0,z2:-1});return r}var sr=function(n,a){if(a==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(a==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},qe=function(n){ee(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t.layoutMode={type:"box",ignoreSize:!0},t}return a.prototype.init=function(t,e,r){this.mergeDefaultAndTheme(t,r),t.selected=t.selected||{},this._updateSelector(t)},a.prototype.mergeOption=function(t,e){n.prototype.mergeOption.call(this,t,e),this._updateSelector(t)},a.prototype._updateSelector=function(t){var e=t.selector,r=this.ecModel;e===!0&&(e=t.selector=["all","inverse"]),Ge(e)&&Y(e,function(o,i){_e(o)&&(o={type:o}),e[i]=ra(o,sr(r,o.type))})},a.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var e=!1,r=0;r<t.length;r++){var o=t[r].get("name");if(this.isSelected(o)){this.select(o),e=!0;break}}!e&&this.select(t[0].get("name"))}},a.prototype._updateData=function(t){var e=[],r=[];t.eachRawSeries(function(c){var u=c.name;r.push(u);var s;if(c.legendVisualProvider){var h=c.legendVisualProvider,f=h.getAllNames();t.isSeriesFiltered(c)||(r=r.concat(f)),f.length?e=e.concat(f):s=!0}else s=!0;s&&na(c)&&e.push(c.name)}),this._availableNames=r;var o=this.get("data")||e,i=Dt(),l=At(o,function(c){return(_e(c)||et(c))&&(c={name:c}),i.get(c.name)?null:(i.set(c.name,!0),new ia(c,this,this.ecModel))},this);this._data=De(l,function(c){return!!c})},a.prototype.getData=function(){return this._data},a.prototype.select=function(t){var e=this.option.selected,r=this.get("selectedMode");if(r==="single"){var o=this._data;Y(o,function(i){e[i.get("name")]=!1})}e[t]=!0},a.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},a.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},a.prototype.allSelect=function(){var t=this._data,e=this.option.selected;Y(t,function(r){e[r.get("name",!0)]=!0})},a.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;Y(t,function(r){var o=r.get("name",!0);e.hasOwnProperty(o)||(e[o]=!0),e[o]=!e[o]})},a.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&$e(this._availableNames,t)>=0},a.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},a.type="legend.plain",a.dependencies=["series"],a.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:F.size.m,align:"auto",backgroundColor:F.color.transparent,borderColor:F.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:F.color.disabled,inactiveBorderColor:F.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:F.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:F.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:F.color.tertiary,borderWidth:1,borderColor:F.color.border},emphasis:{selectorLabel:{show:!0,color:F.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},a}(oa),ne=Z,Ke=Y,Se=Tt,Mt=function(n){ee(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t.newlineDisabled=!1,t}return a.prototype.init=function(){this.group.add(this._contentGroup=new Se),this.group.add(this._selectorGroup=new Se),this._isFirstRender=!0},a.prototype.getContentGroup=function(){return this._contentGroup},a.prototype.getSelectorGroup=function(){return this._selectorGroup},a.prototype.render=function(t,e,r){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var i=t.get("align"),l=t.get("orient");(!i||i==="auto")&&(i=t.get("left")==="right"&&l==="vertical"?"right":"left");var c=t.get("selector",!0),u=t.get("selectorPosition",!0);c&&(!u||u==="auto")&&(u=l==="horizontal"?"end":"start"),this.renderInner(i,t,e,r,c,l,u);var s=sa(t,r).refContainer,h=t.getBoxLayoutParams(),f=t.get("padding"),v=ct(h,s,f),g=this.layoutInner(t,i,v,o,c,u),p=ct(Ct({width:g.width,height:g.height},h),s,f);this.group.x=p.x-g.x,this.group.y=p.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=or(g,t))}},a.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},a.prototype.renderInner=function(t,e,r,o,i,l,c){var u=this.getContentGroup(),s=Dt(),h=e.get("selectedMode"),f=e.get("triggerEvent"),v=[];r.eachRawSeries(function(g){!g.get("legendHoverLink")&&v.push(g.id)}),Ke(e.getData(),function(g,p){var d=this,y=g.get("name");if(!this.newlineDisabled&&(y===""||y===`
`)){var b=new Se;b.newline=!0,u.add(b);return}var m=r.getSeriesByName(y)[0];if(!s.get(y))if(m){var L=m.getData(),x=L.getVisual("legendLineStyle")||{},C=L.getVisual("legendIcon"),A=L.getVisual("style"),S=this._createItem(m,y,p,g,e,t,x,A,C,h,o);S.on("click",ne(ht,y,null,o,v)).on("mouseover",ne(Ze,m.name,null,o,v)).on("mouseout",ne(Je,m.name,null,o,v)),r.ssr&&S.eachChild(function(D){var _=ie(D);_.seriesIndex=m.seriesIndex,_.dataIndex=p,_.ssrType="legend"}),f&&S.eachChild(function(D){d.packEventData(D,e,m,p,y)}),s.set(y,!0)}else r.eachRawSeries(function(D){var _=this;if(!s.get(y)&&D.legendVisualProvider){var R=D.legendVisualProvider;if(!R.containName(y))return;var z=R.indexOfName(y),I=R.getItemVisual(z,"style"),H=R.getItemVisual(z,"legendIcon"),G=la(I.fill);G&&G[3]===0&&(G[3]=.2,I=K(K({},I),{fill:ca(G,"rgba")}));var U=this._createItem(D,y,p,g,e,t,{},I,H,h,o);U.on("click",ne(ht,null,y,o,v)).on("mouseover",ne(Ze,null,y,o,v)).on("mouseout",ne(Je,null,y,o,v)),r.ssr&&U.eachChild(function(M){var k=ie(M);k.seriesIndex=D.seriesIndex,k.dataIndex=p,k.ssrType="legend"}),f&&U.eachChild(function(M){_.packEventData(M,e,D,p,y)}),s.set(y,!0)}},this)},this),i&&this._createSelector(i,e,o,l,c)},a.prototype.packEventData=function(t,e,r,o,i){var l={componentType:"legend",componentIndex:e.componentIndex,dataIndex:o,value:i,seriesIndex:r.seriesIndex};ie(t).eventData=l},a.prototype._createSelector=function(t,e,r,o,i){var l=this.getSelectorGroup();Ke(t,function(u){var s=u.type,h=new Pe({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:s==="all"?"legendAllSelect":"legendInverseSelect",legendId:e.id})}});l.add(h);var f=e.getModel("selectorLabel"),v=e.getModel(["emphasis","selectorLabel"]);_t(h,{normal:f,emphasis:v},{defaultText:u.title}),ut(h)})},a.prototype._createItem=function(t,e,r,o,i,l,c,u,s,h,f){var v=t.visualDrawType,g=i.get("itemWidth"),p=i.get("itemHeight"),d=i.isSelected(e),y=o.get("symbolRotate"),b=o.get("symbolKeepAspect"),m=o.get("icon");s=m||s||"roundRect";var L=lr(s,o,c,u,v,d,f),x=new Se,C=o.getModel("textStyle");if(Te(t.getLegendIcon)&&(!m||m==="inherit"))x.add(t.getLegendIcon({itemWidth:g,itemHeight:p,icon:s,iconRotate:y,itemStyle:L.itemStyle,lineStyle:L.lineStyle,symbolKeepAspect:b}));else{var A=m==="inherit"&&t.getData().getVisual("symbol")?y==="inherit"?t.getData().getVisual("symbolRotate"):y:0;x.add(cr({itemWidth:g,itemHeight:p,icon:s,iconRotate:A,itemStyle:L.itemStyle,symbolKeepAspect:b}))}var S=l==="left"?g+5:-5,D=l,_=i.get("formatter"),R=e;_e(_)&&_?R=_.replace("{name}",e??""):Te(_)&&(R=_(e));var z=d?C.getTextColor():o.get("inactiveColor");x.add(new Pe({style:ua(C,{text:R,x:S,y:p/2,fill:z,align:D,verticalAlign:"middle"},{inheritColor:z})}));var I=new Qe({shape:x.getBoundingRect(),style:{fill:"transparent"}}),H=o.getModel("tooltip");return H.get("show")&&va({el:I,componentModel:i,itemName:e,itemTooltipOption:H.option}),x.add(I),x.eachChild(function(G){G.silent=!0}),I.silent=!h,this.getContentGroup().add(x),ut(x),x.__legendDataIndex=r,x},a.prototype.layoutInner=function(t,e,r,o,i,l){var c=this.getContentGroup(),u=this.getSelectorGroup();pe(t.get("orient"),c,t.get("itemGap"),r.width,r.height);var s=c.getBoundingRect(),h=[-s.x,-s.y];if(u.markRedraw(),c.markRedraw(),i){pe("horizontal",u,t.get("selectorItemGap",!0));var f=u.getBoundingRect(),v=[-f.x,-f.y],g=t.get("selectorButtonGap",!0),p=t.getOrient().index,d=p===0?"width":"height",y=p===0?"height":"width",b=p===0?"y":"x";l==="end"?v[p]+=s[d]+g:h[p]+=f[d]+g,v[1-p]+=s[y]/2-f[y]/2,u.x=v[0],u.y=v[1],c.x=h[0],c.y=h[1];var m={x:0,y:0};return m[d]=s[d]+g+f[d],m[y]=Math.max(s[y],f[y]),m[b]=Math.min(0,f[b]+v[1-p]),m}else return c.x=h[0],c.y=h[1],this.group.getBoundingRect()},a.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},a.type="legend.plain",a}(ga);function lr(n,a,t,e,r,o,i){function l(d,y){d.lineWidth==="auto"&&(d.lineWidth=y.lineWidth>0?2:0),Ke(d,function(b,m){d[m]==="inherit"&&(d[m]=y[m])})}var c=a.getModel("itemStyle"),u=c.getItemStyle(),s=n.lastIndexOf("empty",0)===0?"fill":"stroke",h=c.getShallow("decal");u.decal=!h||h==="inherit"?e.decal:fa(h,i),u.fill==="inherit"&&(u.fill=e[r]),u.stroke==="inherit"&&(u.stroke=e[s]),u.opacity==="inherit"&&(u.opacity=(r==="fill"?e:t).opacity),l(u,e);var f=a.getModel("lineStyle"),v=f.getLineStyle();if(l(v,t),u.fill==="auto"&&(u.fill=e.fill),u.stroke==="auto"&&(u.stroke=e.fill),v.stroke==="auto"&&(v.stroke=e.fill),!o){var g=a.get("inactiveBorderWidth"),p=u[s];u.lineWidth=g==="auto"?e.lineWidth>0&&p?2:0:u.lineWidth,u.fill=a.get("inactiveColor"),u.stroke=a.get("inactiveBorderColor"),v.stroke=f.get("inactiveColor"),v.lineWidth=f.get("inactiveWidth")}return{itemStyle:u,lineStyle:v}}function cr(n){var a=n.icon||"roundRect",t=pa(a,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),a.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill=F.color.neutral00,t.style.lineWidth=2),t}function ht(n,a,t,e){Je(n,a,t,e),t.dispatchAction({type:"legendToggleSelect",name:n??a}),Ze(n,a,t,e)}function kt(n){for(var a=n.getZr().storage.getDisplayList(),t,e=0,r=a.length;e<r&&!(t=a[e].states.emphasis);)e++;return t&&t.hoverLayer}function Ze(n,a,t,e){kt(t)||t.dispatchAction({type:"highlight",seriesName:n,name:a,excludeSeriesId:e})}function Je(n,a,t,e){kt(t)||t.dispatchAction({type:"downplay",seriesName:n,name:a,excludeSeriesId:e})}function ur(n){var a=n.findComponents({mainType:"legend"});a&&a.length&&n.filterSeries(function(t){for(var e=0;e<a.length;e++)if(!a[e].isSelected(t.name))return!1;return!0})}function ue(n,a,t){var e=n==="allSelect"||n==="inverseSelect",r={},o=[];t.eachComponent({mainType:"legend",query:a},function(l){e?l[n]():l[n](a.name),dt(l,r),o.push(l.componentIndex)});var i={};return t.eachComponent("legend",function(l){Y(r,function(c,u){l[c?"select":"unSelect"](u)}),dt(l,i)}),e?{selected:i,legendIndex:o}:{name:a.name,selected:i}}function dt(n,a){var t=a||{};return Y(n.getData(),function(e){var r=e.get("name");if(!(r===`
`||r==="")){var o=n.isSelected(r);ha(t,r)?t[r]=t[r]&&o:t[r]=o}}),t}function vr(n){n.registerAction("legendToggleSelect","legendselectchanged",Z(ue,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",Z(ue,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",Z(ue,"inverseSelect")),n.registerAction("legendSelect","legendselected",Z(ue,"select")),n.registerAction("legendUnSelect","legendunselected",Z(ue,"unSelect"))}function Nt(n){n.registerComponentModel(qe),n.registerComponentView(Mt),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,ur),n.registerSubTypeDefaulter("legend",function(){return"plain"}),vr(n)}var gr=function(n){ee(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},a.prototype.init=function(t,e,r){var o=da(t);n.prototype.init.call(this,t,e,r),yt(this,t,o)},a.prototype.mergeOption=function(t,e){n.prototype.mergeOption.call(this,t,e),yt(this,this.option,t)},a.type="legend.scroll",a.defaultOption=ya(qe.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:F.color.accent50,pageIconInactiveColor:F.color.accent10,pageIconSize:15,pageTextStyle:{color:F.color.tertiary},animationDurationUpdate:800}),a}(qe);function yt(n,a,t){var e=n.getOrient(),r=[1,1];r[e.index]=0,ma(a,t,{type:"box",ignoreSize:!!r})}var mt=Tt,Fe=["width","height"],Ye=["x","y"],fr=function(n){ee(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t.newlineDisabled=!0,t._currentIndex=0,t}return a.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new mt),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new mt)},a.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},a.prototype.renderInner=function(t,e,r,o,i,l,c){var u=this;n.prototype.renderInner.call(this,t,e,r,o,i,l,c);var s=this._controllerGroup,h=e.get("pageIconSize",!0),f=Ge(h)?h:[h,h];g("pagePrev",0);var v=e.getModel("pageTextStyle");s.add(new Pe({name:"pageText",style:{text:"xx/xx",fill:v.getTextColor(),font:v.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(p,d){var y=p+"DataIndex",b=ba(e.get("pageIcons",!0)[e.getOrient().name][d],{onclick:je(u._pageGo,u,y,e,o)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});b.name=p,s.add(b)}},a.prototype.layoutInner=function(t,e,r,o,i,l){var c=this.getSelectorGroup(),u=t.getOrient().index,s=Fe[u],h=Ye[u],f=Fe[1-u],v=Ye[1-u];i&&pe("horizontal",c,t.get("selectorItemGap",!0));var g=t.get("selectorButtonGap",!0),p=c.getBoundingRect(),d=[-p.x,-p.y],y=Pt(r);i&&(y[s]=r[s]-p[s]-g);var b=this._layoutContentAndController(t,o,y,u,s,f,v,h);if(i){if(l==="end")d[u]+=b[s]+g;else{var m=p[s]+g;d[u]-=m,b[h]-=m}b[s]+=p[s]+g,d[1-u]+=b[v]+b[f]/2-p[f]/2,b[f]=Math.max(b[f],p[f]),b[v]=Math.min(b[v],p[v]+d[1-u]),c.x=d[0],c.y=d[1],c.markRedraw()}return b},a.prototype._layoutContentAndController=function(t,e,r,o,i,l,c,u){var s=this.getContentGroup(),h=this._containerGroup,f=this._controllerGroup;pe(t.get("orient"),s,t.get("itemGap"),o?r.width:null,o?null:r.height),pe("horizontal",f,t.get("pageButtonItemGap",!0));var v=s.getBoundingRect(),g=f.getBoundingRect(),p=this._showController=v[i]>r[i],d=[-v.x,-v.y];e||(d[o]=s[u]);var y=[0,0],b=[-g.x,-g.y],m=Ae(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(p){var L=t.get("pageButtonPosition",!0);L==="end"?b[o]+=r[i]-g[i]:y[o]+=g[i]+m}b[1-o]+=v[l]/2-g[l]/2,s.setPosition(d),h.setPosition(y),f.setPosition(b);var x={x:0,y:0};if(x[i]=p?r[i]:v[i],x[l]=Math.max(v[l],g[l]),x[c]=Math.min(0,g[c]+b[1-o]),h.__rectSize=r[i],p){var C={x:0,y:0};C[i]=Math.max(r[i]-g[i]-m,0),C[l]=x[l],h.setClipPath(new Qe({shape:C})),h.__rectSize=C[i]}else f.eachChild(function(S){S.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(t);return A.pageIndex!=null&&he(s,{x:A.contentPosition[0],y:A.contentPosition[1]},p?t:null),this._updatePageInfoView(t,A),x},a.prototype._pageGo=function(t,e,r){var o=this._getPageInfo(e)[t];o!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:e.id})},a.prototype._updatePageInfoView=function(t,e){var r=this._controllerGroup;Y(["pagePrev","pageNext"],function(s){var h=s+"DataIndex",f=e[h]!=null,v=r.childOfName(s);v&&(v.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),v.cursor=f?"pointer":"default")});var o=r.childOfName("pageText"),i=t.get("pageFormatter"),l=e.pageIndex,c=l!=null?l+1:0,u=e.pageCount;o&&i&&o.setStyle("text",_e(i)?i.replace("{current}",c==null?"":c+"").replace("{total}",u==null?"":u+""):i({current:c,total:u}))},a.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),r=this.getContentGroup(),o=this._containerGroup.__rectSize,i=t.getOrient().index,l=Fe[i],c=Ye[i],u=this._findTargetItemIndex(e),s=r.children(),h=s[u],f=s.length,v=f?1:0,g={contentPosition:[r.x,r.y],pageCount:v,pageIndex:v-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return g;var p=L(h);g.contentPosition[i]=-p.s;for(var d=u+1,y=p,b=p,m=null;d<=f;++d)m=L(s[d]),(!m&&b.e>y.s+o||m&&!x(m,y.s))&&(b.i>y.i?y=b:y=m,y&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=y.i),++g.pageCount)),b=m;for(var d=u-1,y=p,b=p,m=null;d>=-1;--d)m=L(s[d]),(!m||!x(b,m.s))&&y.i<b.i&&(b=y,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=y.i),++g.pageCount,++g.pageIndex),y=m;return g;function L(C){if(C){var A=C.getBoundingRect(),S=A[c]+C[c];return{s:S,e:S+A[l],i:C.__legendDataIndex}}}function x(C,A){return C.e>=A&&C.s<=A+o}},a.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var e,r=this.getContentGroup(),o;return r.eachChild(function(i,l){var c=i.__legendDataIndex;o==null&&c!=null&&(o=l),c===t&&(e=l)}),e??o},a.type="legend.scroll",a}(Mt);function pr(n){n.registerAction("legendScroll","legendscroll",function(a,t){var e=a.scrollDataIndex;e!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:a},function(r){r.setScrollDataIndex(e)})})}function hr(n){we(Nt),n.registerComponentModel(gr),n.registerComponentView(fr),pr(n)}function dr(n){we(Nt),we(hr)}function Le(n,a,t){var e=n.get("borderRadius");if(e==null)return t?{cornerRadius:0}:null;Ge(e)||(e=[e,e,e,e]);var r=Math.abs(a.r||0-a.r0||0);return{cornerRadius:At(e,function(o){return xa(o,r)})}}var bt=Math.PI*2,Ce=Math.PI/180;function yr(n,a,t){a.eachSeriesByType(n,function(e){var r=e.getData(),o=r.mapDimension("value"),i=Sa(e,t),l=i.cx,c=i.cy,u=i.r,s=i.r0,h=i.viewRect,f=-e.get("startAngle")*Ce,v=e.get("endAngle"),g=e.get("padAngle")*Ce;v=v==="auto"?f-bt:-v*Ce;var p=e.get("minAngle")*Ce,d=p+g,y=0;r.each(o,function(M){!isNaN(M)&&y++});var b=r.getSum(o),m=Math.PI/(b||y)*2,L=e.get("clockwise"),x=e.get("roseType"),C=e.get("stillShowZeroSum"),A=r.getDataExtent(o);A[0]=0;var S=L?1:-1,D=[f,v],_=S*g/2;La(D,!L),f=D[0],v=D[1];var R=Bt(e);R.startAngle=f,R.endAngle=v,R.clockwise=L,R.cx=l,R.cy=c,R.r=u,R.r0=s;var z=Math.abs(v-f),I=z,H=0,G=f;if(r.setLayout({viewRect:h,r:u}),r.each(o,function(M,k){var P;if(isNaN(M)){r.setItemLayout(k,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:L,cx:l,cy:c,r0:s,r:x?NaN:u});return}x!=="area"?P=b===0&&C?m:M*m:P=z/y,P<d?(P=d,I-=d):H+=M;var E=G+S*P,N=0,O=0;g>P?(N=G+S*P/2,O=N):(N=G+_,O=E-_),r.setItemLayout(k,{angle:P,startAngle:N,endAngle:O,clockwise:L,cx:l,cy:c,r0:s,r:x?Ca(M,A,[s,u]):u}),G=E}),I<bt&&y)if(I<=.001){var U=z/y;r.each(o,function(M,k){if(!isNaN(M)){var P=r.getItemLayout(k);P.angle=U;var E=0,N=0;U<g?(E=f+S*(k+1/2)*U,N=E):(E=f+S*k*U+_,N=f+S*(k+1)*U-_),P.startAngle=E,P.endAngle=N}})}else m=I/H,G=f,r.each(o,function(M,k){if(!isNaN(M)){var P=r.getItemLayout(k),E=P.angle===d?d:M*m,N=0,O=0;E<g?(N=G+S*E/2,O=N):(N=G+_,O=G+S*E-_),P.startAngle=N,P.endAngle=O,G+=S*E}})})}var Bt=de();function mr(n){return{seriesType:n,reset:function(a,t){var e=t.findComponents({mainType:"legend"});if(!(!e||!e.length)){var r=a.getData();r.filterSelf(function(o){for(var i=r.getName(o),l=0;l<e.length;l++)if(!e[l].isSelected(i))return!1;return!0})}}}}var br=Math.PI/180;function xt(n,a,t,e,r,o,i,l,c,u){if(n.length<2)return;function s(p){for(var d=p.rB,y=d*d,b=0;b<p.list.length;b++){var m=p.list[b],L=Math.abs(m.label.y-t),x=e+m.len,C=x*x,A=Math.sqrt(Math.abs((1-L*L/y)*C)),S=a+(A+m.len2)*r,D=S-m.label.x,_=m.targetTextWidth-D*r;Et(m,_,!0),m.label.x=S}}function h(p){for(var d={list:[],maxY:0},y={list:[],maxY:0},b=0;b<p.length;b++)if(p[b].labelAlignTo==="none"){var m=p[b],L=m.label.y>t?y:d,x=Math.abs(m.label.y-t);if(x>=L.maxY){var C=m.label.x-a-m.len2*r,A=e+m.len,S=Math.abs(C)<A?Math.sqrt(x*x/(1-C*C/A/A)):A;L.rB=S,L.maxY=x}L.list.push(m)}s(d),s(y)}for(var f=n.length,v=0;v<f;v++)if(n[v].position==="outer"&&n[v].labelAlignTo==="labelLine"){var g=n[v].label.x-u;n[v].linePoints[1][0]+=g,n[v].label.x=u}Xe(n,1,c,c+i)&&h(n)}function xr(n,a,t,e,r,o,i,l){for(var c=[],u=[],s=Number.MAX_VALUE,h=-Number.MAX_VALUE,f=0;f<n.length;f++){var v=n[f].label;Ue(n[f])||(v.x<a?(s=Math.min(s,v.x),c.push(n[f])):(h=Math.max(h,v.x),u.push(n[f])))}for(var f=0;f<n.length;f++){var g=n[f];if(!Ue(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var v=g.label,p=g.linePoints,d=void 0;g.labelAlignTo==="edge"?v.x<a?d=p[2][0]-g.labelDistance-i-g.edgeDistance:d=i+r-g.edgeDistance-p[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?v.x<a?d=s-i-g.bleedMargin:d=i+r-h-g.bleedMargin:v.x<a?d=v.x-i-g.bleedMargin:d=i+r-v.x-g.bleedMargin,g.targetTextWidth=d,Et(g,d,!1)}}xt(u,a,t,e,1,r,o,i,l,h),xt(c,a,t,e,-1,r,o,i,l,s);for(var f=0;f<n.length;f++){var g=n[f];if(!Ue(g)&&g.linePoints){var v=g.label,p=g.linePoints,y=g.labelAlignTo==="edge",b=v.style.padding,m=b?b[1]+b[3]:0,L=v.style.backgroundColor?0:m,x=g.rect.width+L,C=p[1][0]-p[2][0];y?v.x<a?p[2][0]=i+g.edgeDistance+x+g.labelDistance:p[2][0]=i+r-g.edgeDistance-x-g.labelDistance:(v.x<a?p[2][0]=v.x+g.labelDistance:p[2][0]=v.x-g.labelDistance,p[1][0]=p[2][0]+C),p[1][1]=p[2][1]=v.y}}}function Et(n,a,t){if(n.labelStyleWidth==null){var e=n.label,r=e.style,o=n.rect,i=r.backgroundColor,l=r.padding,c=l?l[1]+l[3]:0,u=r.overflow,s=o.width+(i?0:c);if(a<s||t){if(u&&u.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",a-c);var h=e.getBoundingRect();e.setStyle("width",Math.ceil(h.width)),e.setStyle("backgroundColor",i)}else{var f=a-c,v=a<s?f:t?f>n.unconstrainedWidth?null:f:null;e.setStyle("width",v)}zt(o,e)}}}function zt(n,a){St.rect=n,Da(St,a,Sr)}var Sr={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},St={};function Ue(n){return n.position==="center"}function Lr(n){var a=n.getData(),t=[],e,r,o=!1,i=(n.get("minShowLabelAngle")||0)*br,l=a.getLayout("viewRect"),c=a.getLayout("r"),u=l.width,s=l.x,h=l.y,f=l.height;function v(C){C.ignore=!0}function g(C){if(!C.ignore)return!0;for(var A in C.states)if(C.states[A].ignore===!1)return!0;return!1}a.each(function(C){var A=a.getItemGraphicEl(C),S=A.shape,D=A.getTextContent(),_=A.getTextGuideLine(),R=a.getItemModel(C),z=R.getModel("label"),I=z.get("position")||R.get(["emphasis","label","position"]),H=z.get("distanceToLabelLine"),G=z.get("alignTo"),U=ge(z.get("edgeDistance"),u),M=z.get("bleedMargin");M==null&&(M=Math.min(u,f)>200?10:2);var k=R.getModel("labelLine"),P=k.get("length");P=ge(P,u);var E=k.get("length2");if(E=ge(E,u),Math.abs(S.endAngle-S.startAngle)<i){Y(D.states,v),D.ignore=!0,_&&(Y(_.states,v),_.ignore=!0);return}if(g(D)){var N=(S.startAngle+S.endAngle)/2,O=Math.cos(N),J=Math.sin(N),oe,ye,tt,me;e=S.cx,r=S.cy;var te=I==="inside"||I==="inner";if(I==="center")oe=S.cx,ye=S.cy,me="center";else{var Oe=(te?(S.r+S.r0)/2*O:S.r*O)+e,Me=(te?(S.r+S.r0)/2*J:S.r*J)+r;if(oe=Oe+O*3,ye=Me+J*3,!te){var at=Oe+O*(P+c-S.r),rt=Me+J*(P+c-S.r),nt=at+(O<0?-1:1)*E,it=rt;G==="edge"?oe=O<0?s+U:s+u-U:oe=nt+(O<0?-H:H),ye=it,tt=[[Oe,Me],[at,rt],[nt,it]]}me=te?"center":G==="edge"?O>0?"right":"left":O>0?"left":"right"}var se=Math.PI,ae=0,le=z.get("rotate");if(et(le))ae=le*(se/180);else if(I==="center")ae=0;else if(le==="radial"||le===!0){var Wt=O<0?-N+se:-N;ae=Wt}else if(le==="tangential"&&I!=="outside"&&I!=="outer"){var re=Math.atan2(O,J);re<0&&(re=se*2+re);var Ft=J>0;Ft&&(re=se+re),ae=re-se}if(o=!!ae,D.x=oe,D.y=ye,D.rotation=ae,D.setStyle({verticalAlign:"middle"}),te){D.setStyle({align:me});var Ne=D.states.select;Ne&&(Ne.x+=D.x,Ne.y+=D.y)}else{var ke=new He(0,0,0,0);zt(ke,D),t.push({label:D,labelLine:_,position:I,len:P,len2:E,minTurnAngle:k.get("minTurnAngle"),maxSurfaceAngle:k.get("maxSurfaceAngle"),surfaceNormal:new B(O,J),linePoints:tt,textAlign:me,labelDistance:H,labelAlignTo:G,edgeDistance:U,bleedMargin:M,rect:ke,unconstrainedWidth:ke.width,labelStyleWidth:D.style.width})}A.setTextConfig({inside:te})}}),!o&&n.get("avoidLabelOverlap")&&xr(t,e,r,c,u,f,s,h);for(var p=0;p<t.length;p++){var d=t[p],y=d.label,b=d.labelLine,m=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:d.textAlign}),m&&(Y(y.states,v),y.ignore=!0);var L=y.states.select;L&&(L.x+=y.x,L.y+=y.y)}if(b){var x=d.linePoints;m||!x?(Y(b.states,v),b.ignore=!0):(Rt(x,d.minTurnAngle),Qa(x,d.surfaceNormal,d.maxSurfaceAngle),b.setShape({points:x}),y.__hostTarget.textGuideLineConfig={anchor:new B(x[0][0],x[0][1])})}}}var Cr=function(n){ee(a,n);function a(t,e,r){var o=n.call(this)||this;o.z2=2;var i=new Pe;return o.setTextContent(i),o.updateData(t,e,r,!0),o}return a.prototype.updateData=function(t,e,r,o){var i=this,l=t.hostModel,c=t.getItemModel(e),u=c.getModel("emphasis"),s=t.getItemLayout(e),h=K(Le(c.getModel("itemStyle"),s,!0),s);if(isNaN(h.startAngle)){i.setShape(h);return}if(o){i.setShape(h);var f=l.getShallow("animationType");l.ecModel.ssr?(fe(i,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),i.originX=h.cx,i.originY=h.cy):f==="scale"?(i.shape.r=s.r0,fe(i,{shape:{r:s.r}},l,e)):r!=null?(i.setShape({startAngle:r,endAngle:r}),fe(i,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},l,e)):(i.shape.endAngle=s.startAngle,he(i,{shape:{endAngle:s.endAngle}},l,e))}else _a(i),he(i,{shape:h},l,e);i.useStyle(t.getItemVisual(e,"style")),Pa(i,c);var v=(s.startAngle+s.endAngle)/2,g=l.get("selectedOffset"),p=Math.cos(v)*g,d=Math.sin(v)*g,y=c.getShallow("cursor");y&&i.attr("cursor",y),this._updateLabel(l,t,e),i.ensureState("emphasis").shape=K({r:s.r+(u.get("scale")&&u.get("scaleSize")||0)},Le(u.getModel("itemStyle"),s)),K(i.ensureState("select"),{x:p,y:d,shape:Le(c.getModel(["select","itemStyle"]),s)}),K(i.ensureState("blur"),{shape:Le(c.getModel(["blur","itemStyle"]),s)});var b=i.getTextGuideLine(),m=i.getTextContent();b&&K(b.ensureState("select"),{x:p,y:d}),K(m.ensureState("select"),{x:p,y:d}),wa(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},a.prototype._updateLabel=function(t,e,r){var o=this,i=e.getItemModel(r),l=i.getModel("labelLine"),c=e.getItemVisual(r,"style"),u=c&&c.fill,s=c&&c.opacity;_t(o,Ia(i),{labelFetcher:e.hostModel,labelDataIndex:r,inheritColor:u,defaultOpacity:s,defaultText:t.getFormattedLabel(r,"normal")||e.getName(r)});var h=o.getTextContent();o.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var f=i.get(["label","position"]);if(f!=="outside"&&f!=="outer")o.removeTextGuideLine();else{var v=this.getTextGuideLine();v||(v=new Lt,this.setTextGuideLine(v)),Gt(this,Ot(i),{stroke:u,opacity:Ra(l.get(["lineStyle","opacity"]),s,1)})}},a}(wt),Dr=function(n){ee(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return a.prototype.render=function(t,e,r,o){var i=t.getData(),l=this._data,c=this.group,u;if(!l&&i.count()>0){for(var s=i.getItemLayout(0),h=1;isNaN(s&&s.startAngle)&&h<i.count();++h)s=i.getItemLayout(h);s&&(u=s.startAngle)}if(this._emptyCircleSector&&c.remove(this._emptyCircleSector),i.count()===0&&t.get("showEmptyCircle")){var f=Bt(t),v=new wt({shape:Pt(f)});v.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=v,c.add(v)}i.diff(l).add(function(g){var p=new Cr(i,g,u);i.setItemGraphicEl(g,p),c.add(p)}).update(function(g,p){var d=l.getItemGraphicEl(p);d.updateData(i,g,u),d.off("click"),c.add(d),i.setItemGraphicEl(g,d)}).remove(function(g){var p=l.getItemGraphicEl(g);Aa(p,t,g)}).execute(),Lr(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=i)},a.prototype.dispose=function(){},a.prototype.containPoint=function(t,e){var r=e.getData(),o=r.getItemLayout(0);if(o){var i=t[0]-o.cx,l=t[1]-o.cy,c=Math.sqrt(i*i+l*l);return c<=o.r&&c>=o.r0}},a.type="pie",a}(Ta);function Ar(n,a,t){a=Ge(a)&&{coordDimensions:a}||K({encodeDefine:n.getEncode()},a);var e=n.getSource(),r=Ga(e,a).dimensions,o=new Oa(r,n);return o.initData(e,t),o}var Tr=function(){function n(a,t){this._getDataWithEncodedVisual=a,this._getRawData=t}return n.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},n.prototype.containName=function(a){var t=this._getRawData();return t.indexOfName(a)>=0},n.prototype.indexOfName=function(a){var t=this._getDataWithEncodedVisual();return t.indexOfName(a)},n.prototype.getItemVisual=function(a,t){var e=this._getDataWithEncodedVisual();return e.getItemVisual(a,t)},n}(),_r=de(),Vt=function(n){ee(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Tr(je(this.getData,this),je(this.getRawData,this)),this._defaultLabelLine(t)},a.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return Ar(this,{coordDimensions:["value"],encodeDefaulter:Z(Ma,this)})},a.prototype.getDataParams=function(t){var e=this.getData(),r=_r(e),o=r.seats;if(!o){var i=[];e.each(e.mapDimension("value"),function(c){i.push(c)}),o=r.seats=ka(i,e.hostModel.get("percentPrecision"))}var l=n.prototype.getDataParams.call(this,t);return l.percent=o[t]||0,l.$vars.push("percent"),l},a.prototype._defaultLabelLine=function(t){Na(t,"labelLine",["show"]);var e=t.labelLine,r=t.emphasis.labelLine;e.show=e.show&&t.label.show,r.show=r.show&&t.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(Ba);Ea({fullType:Vt.type,getCoord2:function(n){return n.getShallow("center")}});function Pr(n){return{seriesType:n,reset:function(a,t){var e=a.getData();e.filterSelf(function(r){var o=e.mapDimension("value"),i=e.get(o,r);return!(et(i)&&!isNaN(i)&&i<0)})}}}function wr(n){n.registerChartView(Dr),n.registerSeriesModel(Vt),za("pie",n.registerAction),n.registerLayout(Z(yr,"pie")),n.registerProcessor(mr("pie")),n.registerProcessor(Pr("pie"))}const Ir=Ua({__name:"PieChart",props:{dataMap:{},pieName:{},color:{}},setup(n){we([Va,wr,dr,Wa,ir,Fa]);const a=vt(),t=n;let e;Ee(a,l=>{if(l){e=Ya(l);const c={tooltip:{trigger:"item",formatter:u=>{const{seriesName:s,data:h,percent:f}=u;return`${s}<br>${h.name}: ${h.value} (${f}%)`}},legend:{orient:"vertical",left:"left",textStyle:{color:"#fff"}},color:t.color||void 0,series:[{name:t.pieName,type:"pie",radius:["35%","70%"],itemStyle:{borderRadius:8,borderColor:"rgba(15, 15, 35, 0.8)",borderWidth:6},data:t.dataMap.map(u=>({name:u.tag,value:u.value})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};c&&e.setOption(c)}}),Ee(()=>t.dataMap,l=>{e.setOption({series:[{name:t.pieName,type:"pie",radius:["35%","70%"],itemStyle:{borderRadius:8,borderColor:"rgba(15, 15, 35, 0.8)",borderWidth:6},data:l.map(c=>({name:c.tag,value:c.value})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},{deep:!0});const r=vt();let o,i=0;return Ee(r,l=>{l?(o=new ResizeObserver(()=>{clearTimeout(i),i=setTimeout(()=>{e&&e.resize()},300)}),o.observe(l)):(o?.disconnect(),o=void 0)}),(l,c)=>(Xa(),Ha("div",{ref_key:"containerRef",ref:r,class:"container"},[c[0]||(c[0]=gt("div",{class:"backgound cyber-card"},null,-1)),gt("div",{ref_key:"echartRef",ref:a,class:"payload"},null,512)],512))}}),Mr=$a(Ir,[["__scopeId","data-v-6f89e239"]]);export{Mr as P};
