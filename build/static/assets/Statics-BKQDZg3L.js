import{a as P,S as n,h as L,i as F,r as w}from"./minors-mXhleVk2.js";import{b as u,p}from"./utils-BW_ZrKIj.js";import{P as z}from"./PieChart-CzaQWRx3.js";import{d as O,r as i,a7 as E,b as m,e as v,f as t,s as D,t as l,I as r,a8 as R,C as f,F as j,H as G,i as _,n as H,A as K,P as U}from"./index-BR5oj7Uf.js";import{u as Y}from"./street-Dw46nwSk.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./installCanvasRenderer-BWIarJz0.js";const q=["#93C5FD","#60A5FA","#3B82F6","#2563EB","#1D4ED8","#1E3A8A"],J=["#A7F3D0","#6EE7B7","#34D399","#10B981","#059669","#065F46"],Q=["#FDE68A","#FBBF24","#F59E0B","#D97706","#B45309","#C2410C"],W=["#9AF6FD","#6EE7F5","#22D3EE","#06B6D4","#0891B2","#0E7490"],X=["#C7D2FE","#A5B4FC","#818CF8","#6366F1","#4F46E5","#4C1D95"],Z=["#FECACA","#F87171","#EF4444","#DC2626","#B91C1C","#7F1D1D"],tt=[Q,q,J,W,X,Z],st={class:"layout"},et={class:"top"},at={class:"sys-title"},ot={class:"static-row flex"},nt={class:"static-card cyber-card flex"},it={class:"left flex"},lt={class:"label-show"},ct={class:"number purple"},rt={class:"ud-decoration"},dt={class:"row-title flex"},ut={class:"right"},pt={class:"static-row flex"},mt={class:"static-card cyber-card"},vt={class:"left flex"},ft={class:"label-show"},_t={class:"number cyan"},bt={class:"ud-decoration"},gt={class:"static-card cyber-card"},ht={class:"left flex"},yt={class:"label-show"},Ct={class:"number pink"},Ft={class:"ud-decoration"},wt={class:"static-area"},Et={class:"static"},Dt={class:"title"},Bt={class:"static-title"},St={class:"chart-area"},kt=O({__name:"Statics",setup(xt){const b=i([]);async function B(){const e=await U("/api/data/category-count",{method:"GET"});return e&&e.data&&e.data.success?e.data.data:[]}const{StreetMap:S,CommunityMap:k,ensureStreetCommunityData:x}=Y();function A(e,s){return e==="street"?s.map(a=>({tag:S[a.tag].name,value:a.value})):e==="community"?s.map(a=>({tag:k[a.tag].name,value:a.value})):e==="warningStatus"?s.map(a=>({tag:w.warningStatus[Number(a.tag)],value:a.value})):e==="gender"?s.map(a=>({tag:w.gender[Number(a.tag)],value:a.value})):s}const g=i([]);E(async()=>{const e=await B();await x(),u(n).forEach((s,a)=>{const c=n[s];g.value[a]={title:c,categoryCount:e[a]?A(s,e[a]):[]}})});async function M(){b.value=await P()}M();const T={street:"icon-location",community:"icon-home",warningStatus:"icon-warning",age:"icon-person",gender:"icon-gender",tempProtect:"icon-shield"},N=u(n).reduce((e,s)=>{const a=n[s];return e[a]=T[s],e},Object.create(null));function V(e){return N[e.title]}const d=i(Date.now()),h=i(0),y=i(0);E(async()=>{const e=L(new Date(d.value));h.value=await F("in",e),y.value=await F("out",e)});const C=e=>{const s=u(n).findIndex(a=>n[a]===e.title);if(s!==-1)return tt[s]},I={fpsLimit:60,particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#00C2FF"},shape:{type:"circle"},opacity:{value:.5,random:!1},size:{value:3,random:!0},links:{enable:!0,distance:150,color:"#00C2FF",opacity:.4,width:1},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out"}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"}},modes:{grab:{distance:140,links:{opacity:1}},push:{particles_nb:4}}},retina_detect:!0};return(e,s)=>{const a=D("vue-particles"),c=D("ElDatePicker");return _(),m("div",st,[v(a,{id:"particles",options:I}),t("div",et,[s[1]||(s[1]=t("div",{class:"bg"},null,-1)),t("span",at,l(r(R)),1)]),s[12]||(s[12]=t("div",{class:"placeholder"},null,-1)),s[13]||(s[13]=t("div",{class:"row-title"},[t("span",{class:"icon icon-free icon-bold icon-pie"}),f(" 累计数据概览 ")],-1)),t("div",ot,[t("div",nt,[t("div",it,[s[3]||(s[3]=t("div",{class:"icon-wrap style1"},[t("i",{class:"icon icon-free icon-bold icon-user"})],-1)),t("div",lt,[s[2]||(s[2]=t("span",{class:"label"},"参与者总数",-1)),t("span",ct,[t("span",rt,l(r(p)(b.value.length)),1)])])]),s[4]||(s[4]=t("div",{class:"right"},null,-1))])]),t("div",dt,[s[5]||(s[5]=t("div",{class:"left"},[t("span",{class:"icon icon-free icon-bold icon-calendar"}),f(" 月度数据统计 ")],-1)),t("div",ut,[v(c,{class:"date-picker",type:"month",modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=o=>d.value=o),placeholder:"选择一个月份",teleported:!1,"popper-class":"date-picker-popper"},null,8,["modelValue"])])]),t("div",pt,[t("div",mt,[t("div",vt,[s[7]||(s[7]=t("div",{class:"icon-wrap style2"},[t("i",{class:"icon icon-free icon-bold icon-static"})],-1)),t("div",ft,[s[6]||(s[6]=t("span",{class:"label"},"本月录入数据",-1)),t("span",_t,[t("span",bt,l(r(p)(h.value)),1)])])]),s[8]||(s[8]=t("div",{class:"right"},null,-1))]),t("div",gt,[t("div",ht,[s[10]||(s[10]=t("div",{class:"icon-wrap style3"},[t("i",{class:"icon icon-free icon-bold icon-del"})],-1)),t("div",yt,[s[9]||(s[9]=t("span",{class:"label"},"本月删除数据",-1)),t("span",Ct,[t("span",Ft,l(r(p)(y.value)),1)])])]),s[11]||(s[11]=t("div",{class:"right"},null,-1))])]),s[14]||(s[14]=t("div",{class:"row-title"},[t("span",{class:"icon icon-free icon-bold icon-static"}),f(" 数据分布图 ")],-1)),t("div",wt,[(_(!0),m(j,null,G(g.value,o=>(_(),m("div",Et,[t("span",Dt,[t("span",{class:K(["icon icon-free icon-bold",V(o)]),style:H(`color: ${C(o)?.[1]}`)},null,6),t("span",Bt,l(o.title),1)]),t("div",St,[v(z,{color:C(o),"data-map":o.categoryCount,"pie-name":o.title},null,8,["color","data-map","pie-name"])])]))),256))])])}}}),Lt=$(kt,[["__scopeId","data-v-08fbdb3c"]]);export{Lt as default};
