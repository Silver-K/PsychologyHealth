import{c as gt,d as ft,g as ta}from"./minors-BNGPOB-r.js";import{a as pt}from"./utils-6PSWH6Jr.js";import{b6 as B,b7 as ht,ab as Pe,b8 as Rt,z as Ot,a_ as dt,b9 as yt,ba as We,F as aa,aO as ra,aL as na,bb as ia,bc as oa,bd as ge,ah as ye,G as Ze,be as sa,i as Ie,Y as la,aE as oe,bf as fe,e as U,bg as ca,E as Ae,bh as Je,bi as ua,bj as va,bk as ga,aY as fa,ax as pe,R as Qe,av as de,bl as pa,bm as ha,ai as it,_ as te,j as Be,B as da,b1 as Ge,bn as ya,c as Mt,g as kt,bo as ma,aK as ot,w as Y,x as ba,aj as Nt,N as xa,P as mt,b as J,bp as Sa,aB as Z,bq as La,aW as Re,aC as Bt,br as bt,bs as _a,bt as Ca,bu as he,ao as Da,bv as Aa,as as Ta,bw as wa,u as Pa,bx as Ia,v as Ga,by as Ra,aQ as et,bz as Et,ap as Oe,bA as Oa,bB as Ma,bC as ka,n as Na,bD as Ba,aP as Vt,bE as Ea,aU as Va,aw as za,aS as Fa,aD as Wa,ay as Ya,bF as Ua,p as Ha,f as Xa,bG as ja,bH as qa,bI as $a,aI as Ka,bJ as Za,bK as Ja,b2 as Qa,b3 as er,b4 as tr,b5 as ar}from"./installCanvasRenderer-BWIarJz0.js";import{d as zt,r as Me,w as Ye,a as Te,o as we,b as V,c as Ue,t as xe,g as xt,j as rr,f as St,F as nr,G as ir}from"./index-COYtomWE.js";import{_ as Ft}from"./_plugin-vue_export-helper-DlAUqK2U.js";var ue=Math.PI*2,ee=na.CMD,or=["top","right","bottom","left"];function sr(n,a,t,e,r){var o=t.width,i=t.height;switch(n){case"top":e.set(t.x+o/2,t.y-a),r.set(0,-1);break;case"bottom":e.set(t.x+o/2,t.y+i+a),r.set(0,1);break;case"left":e.set(t.x-a,t.y+i/2),r.set(-1,0);break;case"right":e.set(t.x+o+a,t.y+i/2),r.set(1,0);break}}function lr(n,a,t,e,r,o,i,l,u){i-=n,l-=a;var c=Math.sqrt(i*i+l*l);i/=c,l/=c;var s=i*t+n,p=l*t+a;if(Math.abs(e-r)%ue<1e-4)return u[0]=s,u[1]=p,c-t;if(o){var f=e;e=ge(r),r=ge(f)}else e=ge(e),r=ge(r);e>r&&(r+=ue);var v=Math.atan2(l,i);if(v<0&&(v+=ue),v>=e&&v<=r||v+ue>=e&&v+ue<=r)return u[0]=s,u[1]=p,c-t;var g=t*Math.cos(e)+n,h=t*Math.sin(e)+a,d=t*Math.cos(r)+n,y=t*Math.sin(r)+a,b=(g-i)*(g-i)+(h-l)*(h-l),m=(d-i)*(d-i)+(y-l)*(y-l);return b<m?(u[0]=g,u[1]=h,Math.sqrt(b)):(u[0]=d,u[1]=y,Math.sqrt(m))}function ke(n,a,t,e,r,o,i,l){var u=r-n,c=o-a,s=t-n,p=e-a,f=Math.sqrt(s*s+p*p);s/=f,p/=f;var v=u*s+c*p,g=v/f;l&&(g=Math.min(Math.max(g,0),1)),g*=f;var h=i[0]=n+g*s,d=i[1]=a+g*p;return Math.sqrt((h-r)*(h-r)+(d-o)*(d-o))}function Wt(n,a,t,e,r,o,i){t<0&&(n=n+t,t=-t),e<0&&(a=a+e,e=-e);var l=n+t,u=a+e,c=i[0]=Math.min(Math.max(r,n),l),s=i[1]=Math.min(Math.max(o,a),u);return Math.sqrt((c-r)*(c-r)+(s-o)*(s-o))}var j=[];function cr(n,a,t){var e=Wt(a.x,a.y,a.width,a.height,n.x,n.y,j);return t.set(j[0],j[1]),e}function ur(n,a,t){for(var e=0,r=0,o=0,i=0,l,u,c=1/0,s=a.data,p=n.x,f=n.y,v=0;v<s.length;){var g=s[v++];v===1&&(e=s[v],r=s[v+1],o=e,i=r);var h=c;switch(g){case ee.M:o=s[v++],i=s[v++],e=o,r=i;break;case ee.L:h=ke(e,r,s[v],s[v+1],p,f,j,!0),e=s[v++],r=s[v++];break;case ee.C:h=oa(e,r,s[v++],s[v++],s[v++],s[v++],s[v],s[v+1],p,f,j),e=s[v++],r=s[v++];break;case ee.Q:h=ia(e,r,s[v++],s[v++],s[v],s[v+1],p,f,j),e=s[v++],r=s[v++];break;case ee.A:var d=s[v++],y=s[v++],b=s[v++],m=s[v++],L=s[v++],x=s[v++];v+=1;var _=!!(1-s[v++]);l=Math.cos(L)*b+d,u=Math.sin(L)*m+y,v<=1&&(o=l,i=u);var D=(p-d)*m/b+d;h=lr(d,y,m,L,L+x,_,D,f,j),e=Math.cos(L+x)*b+d,r=Math.sin(L+x)*m+y;break;case ee.R:o=e=s[v++],i=r=s[v++];var S=s[v++],C=s[v++];h=Wt(o,i,S,C,p,f,j);break;case ee.Z:h=ke(e,r,o,i,p,f,j,!0),e=o,r=i;break}h<c&&(c=h,t.set(j[0],j[1]))}return c}var q=new B,A=new B,P=new B,K=new B,$=new B;function Lt(n,a){if(n){var t=n.getTextGuideLine(),e=n.getTextContent();if(e&&t){var r=n.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],i=r.candidates||or,l=e.getBoundingRect().clone();l.applyTransform(e.getComputedTransform());var u=1/0,c=r.anchor,s=n.getComputedTransform(),p=s&&aa([],s),f=a.get("length2")||0;c&&P.copy(c);for(var v=0;v<i.length;v++){var g=i[v];sr(g,0,l,q,K),B.scaleAndAdd(A,q,K,f),A.transform(p);var h=n.getBoundingRect(),d=c?c.distance(A):n instanceof ra?ur(A,n.path,P):cr(A,h,P);d<u&&(u=d,A.transform(s),P.transform(s),P.toArray(o[0]),A.toArray(o[1]),q.toArray(o[2]))}Yt(o,a.get("minTurnAngle")),t.setShape({points:o})}}}var Ne=[],W=new B;function Yt(n,a){if(a<=180&&a>0){a=a/180*Math.PI,q.fromArray(n[0]),A.fromArray(n[1]),P.fromArray(n[2]),B.sub(K,q,A),B.sub($,P,A);var t=K.len(),e=$.len();if(!(t<.001||e<.001)){K.scale(1/t),$.scale(1/e);var r=K.dot($),o=Math.cos(a);if(o<r){var i=ke(A.x,A.y,P.x,P.y,q.x,q.y,Ne,!1);W.fromArray(Ne),W.scaleAndAdd($,i/Math.tan(Math.PI-a));var l=P.x!==A.x?(W.x-A.x)/(P.x-A.x):(W.y-A.y)/(P.y-A.y);if(isNaN(l))return;l<0?B.copy(W,A):l>1&&B.copy(W,P),W.toArray(n[1])}}}}function vr(n,a,t){if(t<=180&&t>0){t=t/180*Math.PI,q.fromArray(n[0]),A.fromArray(n[1]),P.fromArray(n[2]),B.sub(K,A,q),B.sub($,P,A);var e=K.len(),r=$.len();if(!(e<.001||r<.001)){K.scale(1/e),$.scale(1/r);var o=K.dot(a),i=Math.cos(t);if(o<i){var l=ke(A.x,A.y,P.x,P.y,q.x,q.y,Ne,!1);W.fromArray(Ne);var u=Math.PI/2,c=Math.acos($.dot(a)),s=u+c-t;if(s>=u)B.copy(W,P);else{W.scaleAndAdd($,l/Math.tan(Math.PI/2-s));var p=P.x!==A.x?(W.x-A.x)/(P.x-A.x):(W.y-A.y)/(P.y-A.y);if(isNaN(p))return;p<0?B.copy(W,A):p>1&&B.copy(W,P)}W.toArray(n[1])}}}}function He(n,a,t,e){var r=t==="normal",o=r?n:n.ensureState(t);o.ignore=a;var i=e.get("smooth");i&&i===!0&&(i=.3),o.shape=o.shape||{},i>0&&(o.shape.smooth=i);var l=e.getModel("lineStyle").getLineStyle();r?n.useStyle(l):o.style=l}function gr(n,a){var t=a.smooth,e=a.points;if(e)if(n.moveTo(e[0][0],e[0][1]),t>0&&e.length>=3){var r=yt(e[0],e[1]),o=yt(e[1],e[2]);if(!r||!o){n.lineTo(e[1][0],e[1][1]),n.lineTo(e[2][0],e[2][1]);return}var i=Math.min(r,o)*t,l=We([],e[1],e[0],i/r),u=We([],e[1],e[2],i/o),c=We([],l,u,.5);n.bezierCurveTo(l[0],l[1],l[0],l[1],c[0],c[1]),n.bezierCurveTo(u[0],u[1],u[0],u[1],e[2][0],e[2][1])}else for(var s=1;s<e.length;s++)n.lineTo(e[s][0],e[s][1])}function Ut(n,a,t){var e=n.getTextGuideLine(),r=n.getTextContent();if(!r){e&&n.removeTextGuideLine();return}for(var o=a.normal,i=o.get("show"),l=r.ignore,u=0;u<ht.length;u++){var c=ht[u],s=a[c],p=c==="normal";if(s){var f=s.get("show"),v=p?l:Pe(r.states[c]&&r.states[c].ignore,l);if(v||!Pe(f,i)){var g=p?e:e&&e.states[c];g&&(g.ignore=!0),e&&He(e,!0,c,s);continue}e||(e=new Rt,n.setTextGuideLine(e),!p&&(l||!i)&&He(e,!0,"normal",a.normal),n.stateProxy&&(e.stateProxy=n.stateProxy)),He(e,!1,c,s)}}if(e){Ot(e.style,t),e.style.fill=null;var h=o.get("showAbove"),d=n.textGuideLineConfig=n.textGuideLineConfig||{};d.showAbove=h||!1,e.buildPath=gr}}function Ht(n,a){a=a||"labelLine";for(var t={normal:n.getModel(a)},e=0;e<dt.length;e++){var r=dt[e];t[r]=n.getModel([r,a])}return t}function fr(n){if(n){for(var a=[],t=0;t<n.length;t++)a.push(n[t].slice());return a}}function pr(n,a){var t=n.label,e=a&&a.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:fr(e&&e.shape.points)}}var _t=["align","verticalAlign","width","height","fontSize"],F=new sa,Xe=ye(),hr=ye();function Se(n,a,t){for(var e=0;e<t.length;e++){var r=t[e];a[r]!=null&&(n[r]=a[r])}}var Le=["x","y","rotation"],dr=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(a,t,e,r,o){var i=r.style,l=r.__hostTarget,u=l.textConfig||{},c=r.getComputedTransform(),s=r.getBoundingRect().plain();Ze.applyTransform(s,s,c),c?F.setLocalTransform(c):(F.x=F.y=F.rotation=F.originX=F.originY=0,F.scaleX=F.scaleY=1),F.rotation=ge(F.rotation);var p=r.__hostTarget,f;if(p){f=p.getBoundingRect().plain();var v=p.getComputedTransform();Ze.applyTransform(f,f,v)}var g=f&&p.getTextGuideLine();this._labelList.push({label:r,labelLine:g,seriesModel:e,dataIndex:a,dataType:t,layoutOptionOrCb:o,layoutOption:null,rect:s,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:g&&g.ignore,x:F.x,y:F.y,scaleX:F.scaleX,scaleY:F.scaleY,rotation:F.rotation,style:{x:i.x,y:i.y,align:i.align,verticalAlign:i.verticalAlign,width:i.width,height:i.height,fontSize:i.fontSize},cursor:r.cursor,attachedPos:u.position,attachedRot:u.rotation}})},n.prototype.addLabelsOfSeries=function(a){var t=this;this._chartViewList.push(a);var e=a.__model,r=e.get("labelLayout");(Ie(r)||la(r).length)&&a.group.traverse(function(o){if(o.ignore)return!0;var i=o.getTextContent(),l=oe(o);i&&!i.disableLabelLayout&&t._addLabel(l.dataIndex,l.dataType,e,i,r)})},n.prototype.updateLayoutConfig=function(a){var t=a.getWidth(),e=a.getHeight();function r(m,L){return function(){Lt(m,L)}}for(var o=0;o<this._labelList.length;o++){var i=this._labelList[o],l=i.label,u=l.__hostTarget,c=i.defaultAttr,s=void 0;Ie(i.layoutOptionOrCb)?s=i.layoutOptionOrCb(pr(i,u)):s=i.layoutOptionOrCb,s=s||{},i.layoutOption=s;var p=Math.PI/180;u&&u.setTextConfig({local:!1,position:s.x!=null||s.y!=null?null:c.attachedPos,rotation:s.rotate!=null?s.rotate*p:c.attachedRot,offset:[s.dx||0,s.dy||0]});var f=!1;if(s.x!=null?(l.x=fe(s.x,t),l.setStyle("x",0),f=!0):(l.x=c.x,l.setStyle("x",c.style.x)),s.y!=null?(l.y=fe(s.y,e),l.setStyle("y",0),f=!0):(l.y=c.y,l.setStyle("y",c.style.y)),s.labelLinePoints){var v=u.getTextGuideLine();v&&(v.setShape({points:s.labelLinePoints}),f=!1)}var g=Xe(l);g.needsUpdateLabelLine=f,l.rotation=s.rotate!=null?s.rotate*p:c.rotation,l.scaleX=c.scaleX,l.scaleY=c.scaleY;for(var h=0;h<_t.length;h++){var d=_t[h];l.setStyle(d,s[d]!=null?s[d]:c.style[d])}if(s.draggable){if(l.draggable=!0,l.cursor="move",u){var y=i.seriesModel;if(i.dataIndex!=null){var b=i.seriesModel.getData(i.dataType);y=b.getItemModel(i.dataIndex)}l.on("drag",r(u,y.getModel("labelLine")))}}else l.off("drag"),l.cursor=c.cursor}},n.prototype.layout=function(a){var t=a.getWidth(),e=a.getHeight(),r=[];U(this._labelList,function(u){u.defaultAttr.ignore||r.push(ca({},u))});var o=Ae(r,function(u){return u.layoutOption.moveOverlap==="shiftX"}),i=Ae(r,function(u){return u.layoutOption.moveOverlap==="shiftY"});Je(o,0,0,t),Je(i,1,0,e);var l=Ae(r,function(u){return u.layoutOption.hideOverlap});ua(l),va(l)},n.prototype.processLabelsOverall=function(){var a=this;U(this._chartViewList,function(t){var e=t.__model,r=t.ignoreLabelLineUpdate,o=e.isAnimationEnabled();t.group.traverse(function(i){if(i.ignore&&!i.forceLabelAnimation)return!0;var l=!r,u=i.getTextContent();!l&&u&&(l=Xe(u).needsUpdateLabelLine),l&&a._updateLabelLine(i,e),o&&a._animateLabels(i,e)})})},n.prototype._updateLabelLine=function(a,t){var e=a.getTextContent(),r=oe(a),o=r.dataIndex;if(e&&o!=null){var i=t.getData(r.dataType),l=i.getItemModel(o),u={},c=i.getItemVisual(o,"style");if(c){var s=i.getVisual("drawType");u.stroke=c[s]}var p=l.getModel("labelLine");Ut(a,Ht(l),u),Lt(a,p)}},n.prototype._animateLabels=function(a,t){var e=a.getTextContent(),r=a.getTextGuideLine();if(e&&(a.forceLabelAnimation||!e.ignore&&!e.invisible&&!a.disableLabelAnimation&&!ga(a))){var o=Xe(e),i=o.oldLayout,l=oe(a),u=l.dataIndex,c={x:e.x,y:e.y,rotation:e.rotation},s=t.getData(l.dataType);if(i){e.attr(i);var f=a.prevStates;f&&(Qe(f,"select")>=0&&e.attr(o.oldLayoutSelect),Qe(f,"emphasis")>=0&&e.attr(o.oldLayoutEmphasis)),de(e,c,t,u)}else if(e.attr(c),!fa(e).valueAnimation){var p=Pe(e.style.opacity,1);e.style.opacity=0,pe(e,{style:{opacity:p}},t,u)}if(o.oldLayout=c,e.states.select){var v=o.oldLayoutSelect={};Se(v,c,Le),Se(v,e.states.select,Le)}if(e.states.emphasis){var g=o.oldLayoutEmphasis={};Se(g,c,Le),Se(g,e.states.emphasis,Le)}pa(e,u,s,t,t)}if(r&&!r.ignore&&!r.invisible){var o=hr(r),i=o.oldLayout,h={points:r.shape.points};i?(r.attr({shape:i}),de(r,{shape:h},t)):(r.setShape(h),r.style.strokePercent=0,pe(r,{style:{strokePercent:1}},t)),o.oldLayout=h}},n}(),je=ye();function yr(n){n.registerUpdateLifecycle("series:beforeupdate",function(a,t,e){var r=je(t).labelManager;r||(r=je(t).labelManager=new dr),r.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(a,t,e){var r=je(t).labelManager;e.updatedSeries.forEach(function(o){r.addLabelsOfSeries(t.getViewOfSeriesModel(o))}),r.updateLayoutConfig(t),r.layout(t),r.processLabelsOverall()})}function mr(n,a){var t=ha(a.get("padding")),e=a.getItemStyle(["color","opacity"]);e.fill=a.get("backgroundColor");var r=new it({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:a.get("borderRadius")},style:e,silent:!0,z2:-1});return r}var br=function(n,a){if(a==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(a==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},tt=function(n){te(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t.layoutMode={type:"box",ignoreSize:!0},t}return a.prototype.init=function(t,e,r){this.mergeDefaultAndTheme(t,r),t.selected=t.selected||{},this._updateSelector(t)},a.prototype.mergeOption=function(t,e){n.prototype.mergeOption.call(this,t,e),this._updateSelector(t)},a.prototype._updateSelector=function(t){var e=t.selector,r=this.ecModel;e===!0&&(e=t.selector=["all","inverse"]),Be(e)&&U(e,function(o,i){Ge(o)&&(o={type:o}),e[i]=da(o,br(r,o.type))})},a.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var e=!1,r=0;r<t.length;r++){var o=t[r].get("name");if(this.isSelected(o)){this.select(o),e=!0;break}}!e&&this.select(t[0].get("name"))}},a.prototype._updateData=function(t){var e=[],r=[];t.eachRawSeries(function(u){var c=u.name;r.push(c);var s;if(u.legendVisualProvider){var p=u.legendVisualProvider,f=p.getAllNames();t.isSeriesFiltered(u)||(r=r.concat(f)),f.length?e=e.concat(f):s=!0}else s=!0;s&&ya(u)&&e.push(u.name)}),this._availableNames=r;var o=this.get("data")||e,i=Mt(),l=kt(o,function(u){return(Ge(u)||ot(u))&&(u={name:u}),i.get(u.name)?null:(i.set(u.name,!0),new ma(u,this,this.ecModel))},this);this._data=Ae(l,function(u){return!!u})},a.prototype.getData=function(){return this._data},a.prototype.select=function(t){var e=this.option.selected,r=this.get("selectedMode");if(r==="single"){var o=this._data;U(o,function(i){e[i.get("name")]=!1})}e[t]=!0},a.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},a.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},a.prototype.allSelect=function(){var t=this._data,e=this.option.selected;U(t,function(r){e[r.get("name",!0)]=!0})},a.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;U(t,function(r){var o=r.get("name",!0);e.hasOwnProperty(o)||(e[o]=!0),e[o]=!e[o]})},a.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&Qe(this._availableNames,t)>=0},a.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},a.type="legend.plain",a.dependencies=["series"],a.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:Y.size.m,align:"auto",backgroundColor:Y.color.transparent,borderColor:Y.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:Y.color.disabled,inactiveBorderColor:Y.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:Y.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:Y.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:Y.color.tertiary,borderWidth:1,borderColor:Y.color.border},emphasis:{selectorLabel:{show:!0,color:Y.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},a}(ba),ie=J,at=U,_e=Nt,Xt=function(n){te(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t.newlineDisabled=!1,t}return a.prototype.init=function(){this.group.add(this._contentGroup=new _e),this.group.add(this._selectorGroup=new _e),this._isFirstRender=!0},a.prototype.getContentGroup=function(){return this._contentGroup},a.prototype.getSelectorGroup=function(){return this._selectorGroup},a.prototype.render=function(t,e,r){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var i=t.get("align"),l=t.get("orient");(!i||i==="auto")&&(i=t.get("left")==="right"&&l==="vertical"?"right":"left");var u=t.get("selector",!0),c=t.get("selectorPosition",!0);u&&(!c||c==="auto")&&(c=l==="horizontal"?"end":"start"),this.renderInner(i,t,e,r,u,l,c);var s=xa(t,r).refContainer,p=t.getBoxLayoutParams(),f=t.get("padding"),v=mt(p,s,f),g=this.layoutInner(t,i,v,o,u,c),h=mt(Ot({width:g.width,height:g.height},p),s,f);this.group.x=h.x-g.x,this.group.y=h.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=mr(g,t))}},a.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},a.prototype.renderInner=function(t,e,r,o,i,l,u){var c=this.getContentGroup(),s=Mt(),p=e.get("selectedMode"),f=e.get("triggerEvent"),v=[];r.eachRawSeries(function(g){!g.get("legendHoverLink")&&v.push(g.id)}),at(e.getData(),function(g,h){var d=this,y=g.get("name");if(!this.newlineDisabled&&(y===""||y===`
`)){var b=new _e;b.newline=!0,c.add(b);return}var m=r.getSeriesByName(y)[0];if(!s.get(y))if(m){var L=m.getData(),x=L.getVisual("legendLineStyle")||{},_=L.getVisual("legendIcon"),D=L.getVisual("style"),S=this._createItem(m,y,h,g,e,t,x,D,_,p,o);S.on("click",ie(Ct,y,null,o,v)).on("mouseover",ie(rt,m.name,null,o,v)).on("mouseout",ie(nt,m.name,null,o,v)),r.ssr&&S.eachChild(function(C){var T=oe(C);T.seriesIndex=m.seriesIndex,T.dataIndex=h,T.ssrType="legend"}),f&&S.eachChild(function(C){d.packEventData(C,e,m,h,y)}),s.set(y,!0)}else r.eachRawSeries(function(C){var T=this;if(!s.get(y)&&C.legendVisualProvider){var G=C.legendVisualProvider;if(!G.containName(y))return;var z=G.indexOfName(y),I=G.getItemVisual(z,"style"),X=G.getItemVisual(z,"legendIcon"),R=Sa(I.fill);R&&R[3]===0&&(R[3]=.2,I=Z(Z({},I),{fill:La(R,"rgba")}));var H=this._createItem(C,y,h,g,e,t,{},I,X,p,o);H.on("click",ie(Ct,null,y,o,v)).on("mouseover",ie(rt,null,y,o,v)).on("mouseout",ie(nt,null,y,o,v)),r.ssr&&H.eachChild(function(M){var k=oe(M);k.seriesIndex=C.seriesIndex,k.dataIndex=h,k.ssrType="legend"}),f&&H.eachChild(function(M){T.packEventData(M,e,C,h,y)}),s.set(y,!0)}},this)},this),i&&this._createSelector(i,e,o,l,u)},a.prototype.packEventData=function(t,e,r,o,i){var l={componentType:"legend",componentIndex:e.componentIndex,dataIndex:o,value:i,seriesIndex:r.seriesIndex};oe(t).eventData=l},a.prototype._createSelector=function(t,e,r,o,i){var l=this.getSelectorGroup();at(t,function(c){var s=c.type,p=new Re({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:s==="all"?"legendAllSelect":"legendInverseSelect",legendId:e.id})}});l.add(p);var f=e.getModel("selectorLabel"),v=e.getModel(["emphasis","selectorLabel"]);Bt(p,{normal:f,emphasis:v},{defaultText:c.title}),bt(p)})},a.prototype._createItem=function(t,e,r,o,i,l,u,c,s,p,f){var v=t.visualDrawType,g=i.get("itemWidth"),h=i.get("itemHeight"),d=i.isSelected(e),y=o.get("symbolRotate"),b=o.get("symbolKeepAspect"),m=o.get("icon");s=m||s||"roundRect";var L=xr(s,o,u,c,v,d,f),x=new _e,_=o.getModel("textStyle");if(Ie(t.getLegendIcon)&&(!m||m==="inherit"))x.add(t.getLegendIcon({itemWidth:g,itemHeight:h,icon:s,iconRotate:y,itemStyle:L.itemStyle,lineStyle:L.lineStyle,symbolKeepAspect:b}));else{var D=m==="inherit"&&t.getData().getVisual("symbol")?y==="inherit"?t.getData().getVisual("symbolRotate"):y:0;x.add(Sr({itemWidth:g,itemHeight:h,icon:s,iconRotate:D,itemStyle:L.itemStyle,symbolKeepAspect:b}))}var S=l==="left"?g+5:-5,C=l,T=i.get("formatter"),G=e;Ge(T)&&T?G=T.replace("{name}",e??""):Ie(T)&&(G=T(e));var z=d?_.getTextColor():o.get("inactiveColor");x.add(new Re({style:_a(_,{text:G,x:S,y:h/2,fill:z,align:C,verticalAlign:"middle"},{inheritColor:z})}));var I=new it({shape:x.getBoundingRect(),style:{fill:"transparent"}}),X=o.getModel("tooltip");return X.get("show")&&Ca({el:I,componentModel:i,itemName:e,itemTooltipOption:X.option}),x.add(I),x.eachChild(function(R){R.silent=!0}),I.silent=!p,this.getContentGroup().add(x),bt(x),x.__legendDataIndex=r,x},a.prototype.layoutInner=function(t,e,r,o,i,l){var u=this.getContentGroup(),c=this.getSelectorGroup();he(t.get("orient"),u,t.get("itemGap"),r.width,r.height);var s=u.getBoundingRect(),p=[-s.x,-s.y];if(c.markRedraw(),u.markRedraw(),i){he("horizontal",c,t.get("selectorItemGap",!0));var f=c.getBoundingRect(),v=[-f.x,-f.y],g=t.get("selectorButtonGap",!0),h=t.getOrient().index,d=h===0?"width":"height",y=h===0?"height":"width",b=h===0?"y":"x";l==="end"?v[h]+=s[d]+g:p[h]+=f[d]+g,v[1-h]+=s[y]/2-f[y]/2,c.x=v[0],c.y=v[1],u.x=p[0],u.y=p[1];var m={x:0,y:0};return m[d]=s[d]+g+f[d],m[y]=Math.max(s[y],f[y]),m[b]=Math.min(0,f[b]+v[1-h]),m}else return u.x=p[0],u.y=p[1],this.group.getBoundingRect()},a.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},a.type="legend.plain",a}(Da);function xr(n,a,t,e,r,o,i){function l(d,y){d.lineWidth==="auto"&&(d.lineWidth=y.lineWidth>0?2:0),at(d,function(b,m){d[m]==="inherit"&&(d[m]=y[m])})}var u=a.getModel("itemStyle"),c=u.getItemStyle(),s=n.lastIndexOf("empty",0)===0?"fill":"stroke",p=u.getShallow("decal");c.decal=!p||p==="inherit"?e.decal:Aa(p,i),c.fill==="inherit"&&(c.fill=e[r]),c.stroke==="inherit"&&(c.stroke=e[s]),c.opacity==="inherit"&&(c.opacity=(r==="fill"?e:t).opacity),l(c,e);var f=a.getModel("lineStyle"),v=f.getLineStyle();if(l(v,t),c.fill==="auto"&&(c.fill=e.fill),c.stroke==="auto"&&(c.stroke=e.fill),v.stroke==="auto"&&(v.stroke=e.fill),!o){var g=a.get("inactiveBorderWidth"),h=c[s];c.lineWidth=g==="auto"?e.lineWidth>0&&h?2:0:c.lineWidth,c.fill=a.get("inactiveColor"),c.stroke=a.get("inactiveBorderColor"),v.stroke=f.get("inactiveColor"),v.lineWidth=f.get("inactiveWidth")}return{itemStyle:c,lineStyle:v}}function Sr(n){var a=n.icon||"roundRect",t=Ta(a,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),a.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill=Y.color.neutral00,t.style.lineWidth=2),t}function Ct(n,a,t,e){nt(n,a,t,e),t.dispatchAction({type:"legendToggleSelect",name:n??a}),rt(n,a,t,e)}function jt(n){for(var a=n.getZr().storage.getDisplayList(),t,e=0,r=a.length;e<r&&!(t=a[e].states.emphasis);)e++;return t&&t.hoverLayer}function rt(n,a,t,e){jt(t)||t.dispatchAction({type:"highlight",seriesName:n,name:a,excludeSeriesId:e})}function nt(n,a,t,e){jt(t)||t.dispatchAction({type:"downplay",seriesName:n,name:a,excludeSeriesId:e})}function Lr(n){var a=n.findComponents({mainType:"legend"});a&&a.length&&n.filterSeries(function(t){for(var e=0;e<a.length;e++)if(!a[e].isSelected(t.name))return!1;return!0})}function ve(n,a,t){var e=n==="allSelect"||n==="inverseSelect",r={},o=[];t.eachComponent({mainType:"legend",query:a},function(l){e?l[n]():l[n](a.name),Dt(l,r),o.push(l.componentIndex)});var i={};return t.eachComponent("legend",function(l){U(r,function(u,c){l[u?"select":"unSelect"](c)}),Dt(l,i)}),e?{selected:i,legendIndex:o}:{name:a.name,selected:i}}function Dt(n,a){var t=a||{};return U(n.getData(),function(e){var r=e.get("name");if(!(r===`
`||r==="")){var o=n.isSelected(r);wa(t,r)?t[r]=t[r]&&o:t[r]=o}}),t}function _r(n){n.registerAction("legendToggleSelect","legendselectchanged",J(ve,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",J(ve,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",J(ve,"inverseSelect")),n.registerAction("legendSelect","legendselected",J(ve,"select")),n.registerAction("legendUnSelect","legendunselected",J(ve,"unSelect"))}function qt(n){n.registerComponentModel(tt),n.registerComponentView(Xt),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,Lr),n.registerSubTypeDefaulter("legend",function(){return"plain"}),_r(n)}var Cr=function(n){te(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},a.prototype.init=function(t,e,r){var o=Pa(t);n.prototype.init.call(this,t,e,r),At(this,t,o)},a.prototype.mergeOption=function(t,e){n.prototype.mergeOption.call(this,t,e),At(this,this.option,t)},a.type="legend.scroll",a.defaultOption=Ia(tt.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:Y.color.accent50,pageIconInactiveColor:Y.color.accent10,pageIconSize:15,pageTextStyle:{color:Y.color.tertiary},animationDurationUpdate:800}),a}(tt);function At(n,a,t){var e=n.getOrient(),r=[1,1];r[e.index]=0,Ga(a,t,{type:"box",ignoreSize:!!r})}var Tt=Nt,qe=["width","height"],$e=["x","y"],Dr=function(n){te(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t.newlineDisabled=!0,t._currentIndex=0,t}return a.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new Tt),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Tt)},a.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},a.prototype.renderInner=function(t,e,r,o,i,l,u){var c=this;n.prototype.renderInner.call(this,t,e,r,o,i,l,u);var s=this._controllerGroup,p=e.get("pageIconSize",!0),f=Be(p)?p:[p,p];g("pagePrev",0);var v=e.getModel("pageTextStyle");s.add(new Re({name:"pageText",style:{text:"xx/xx",fill:v.getTextColor(),font:v.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(h,d){var y=h+"DataIndex",b=Ra(e.get("pageIcons",!0)[e.getOrient().name][d],{onclick:et(c._pageGo,c,y,e,o)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});b.name=h,s.add(b)}},a.prototype.layoutInner=function(t,e,r,o,i,l){var u=this.getSelectorGroup(),c=t.getOrient().index,s=qe[c],p=$e[c],f=qe[1-c],v=$e[1-c];i&&he("horizontal",u,t.get("selectorItemGap",!0));var g=t.get("selectorButtonGap",!0),h=u.getBoundingRect(),d=[-h.x,-h.y],y=Et(r);i&&(y[s]=r[s]-h[s]-g);var b=this._layoutContentAndController(t,o,y,c,s,f,v,p);if(i){if(l==="end")d[c]+=b[s]+g;else{var m=h[s]+g;d[c]-=m,b[p]-=m}b[s]+=h[s]+g,d[1-c]+=b[v]+b[f]/2-h[f]/2,b[f]=Math.max(b[f],h[f]),b[v]=Math.min(b[v],h[v]+d[1-c]),u.x=d[0],u.y=d[1],u.markRedraw()}return b},a.prototype._layoutContentAndController=function(t,e,r,o,i,l,u,c){var s=this.getContentGroup(),p=this._containerGroup,f=this._controllerGroup;he(t.get("orient"),s,t.get("itemGap"),o?r.width:null,o?null:r.height),he("horizontal",f,t.get("pageButtonItemGap",!0));var v=s.getBoundingRect(),g=f.getBoundingRect(),h=this._showController=v[i]>r[i],d=[-v.x,-v.y];e||(d[o]=s[c]);var y=[0,0],b=[-g.x,-g.y],m=Pe(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(h){var L=t.get("pageButtonPosition",!0);L==="end"?b[o]+=r[i]-g[i]:y[o]+=g[i]+m}b[1-o]+=v[l]/2-g[l]/2,s.setPosition(d),p.setPosition(y),f.setPosition(b);var x={x:0,y:0};if(x[i]=h?r[i]:v[i],x[l]=Math.max(v[l],g[l]),x[u]=Math.min(0,g[u]+b[1-o]),p.__rectSize=r[i],h){var _={x:0,y:0};_[i]=Math.max(r[i]-g[i]-m,0),_[l]=x[l],p.setClipPath(new it({shape:_})),p.__rectSize=_[i]}else f.eachChild(function(S){S.attr({invisible:!0,silent:!0})});var D=this._getPageInfo(t);return D.pageIndex!=null&&de(s,{x:D.contentPosition[0],y:D.contentPosition[1]},h?t:null),this._updatePageInfoView(t,D),x},a.prototype._pageGo=function(t,e,r){var o=this._getPageInfo(e)[t];o!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:e.id})},a.prototype._updatePageInfoView=function(t,e){var r=this._controllerGroup;U(["pagePrev","pageNext"],function(s){var p=s+"DataIndex",f=e[p]!=null,v=r.childOfName(s);v&&(v.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),v.cursor=f?"pointer":"default")});var o=r.childOfName("pageText"),i=t.get("pageFormatter"),l=e.pageIndex,u=l!=null?l+1:0,c=e.pageCount;o&&i&&o.setStyle("text",Ge(i)?i.replace("{current}",u==null?"":u+"").replace("{total}",c==null?"":c+""):i({current:u,total:c}))},a.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),r=this.getContentGroup(),o=this._containerGroup.__rectSize,i=t.getOrient().index,l=qe[i],u=$e[i],c=this._findTargetItemIndex(e),s=r.children(),p=s[c],f=s.length,v=f?1:0,g={contentPosition:[r.x,r.y],pageCount:v,pageIndex:v-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!p)return g;var h=L(p);g.contentPosition[i]=-h.s;for(var d=c+1,y=h,b=h,m=null;d<=f;++d)m=L(s[d]),(!m&&b.e>y.s+o||m&&!x(m,y.s))&&(b.i>y.i?y=b:y=m,y&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=y.i),++g.pageCount)),b=m;for(var d=c-1,y=h,b=h,m=null;d>=-1;--d)m=L(s[d]),(!m||!x(b,m.s))&&y.i<b.i&&(b=y,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=y.i),++g.pageCount,++g.pageIndex),y=m;return g;function L(_){if(_){var D=_.getBoundingRect(),S=D[u]+_[u];return{s:S,e:S+D[l],i:_.__legendDataIndex}}}function x(_,D){return _.e>=D&&_.s<=D+o}},a.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var e,r=this.getContentGroup(),o;return r.eachChild(function(i,l){var u=i.__legendDataIndex;o==null&&u!=null&&(o=l),u===t&&(e=l)}),e??o},a.type="legend.scroll",a}(Xt);function Ar(n){n.registerAction("legendScroll","legendscroll",function(a,t){var e=a.scrollDataIndex;e!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:a},function(r){r.setScrollDataIndex(e)})})}function Tr(n){Oe(qt),n.registerComponentModel(Cr),n.registerComponentView(Dr),Ar(n)}function wr(n){Oe(qt),Oe(Tr)}function Ce(n,a,t){var e=n.get("borderRadius");if(e==null)return t?{cornerRadius:0}:null;Be(e)||(e=[e,e,e,e]);var r=Math.abs(a.r||0-a.r0||0);return{cornerRadius:kt(e,function(o){return Oa(o,r)})}}var wt=Math.PI*2,De=Math.PI/180;function Pr(n,a,t){a.eachSeriesByType(n,function(e){var r=e.getData(),o=r.mapDimension("value"),i=Ma(e,t),l=i.cx,u=i.cy,c=i.r,s=i.r0,p=i.viewRect,f=-e.get("startAngle")*De,v=e.get("endAngle"),g=e.get("padAngle")*De;v=v==="auto"?f-wt:-v*De;var h=e.get("minAngle")*De,d=h+g,y=0;r.each(o,function(M){!isNaN(M)&&y++});var b=r.getSum(o),m=Math.PI/(b||y)*2,L=e.get("clockwise"),x=e.get("roseType"),_=e.get("stillShowZeroSum"),D=r.getDataExtent(o);D[0]=0;var S=L?1:-1,C=[f,v],T=S*g/2;ka(C,!L),f=C[0],v=C[1];var G=$t(e);G.startAngle=f,G.endAngle=v,G.clockwise=L,G.cx=l,G.cy=u,G.r=c,G.r0=s;var z=Math.abs(v-f),I=z,X=0,R=f;if(r.setLayout({viewRect:p,r:c}),r.each(o,function(M,k){var w;if(isNaN(M)){r.setItemLayout(k,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:L,cx:l,cy:u,r0:s,r:x?NaN:c});return}x!=="area"?w=b===0&&_?m:M*m:w=z/y,w<d?(w=d,I-=d):X+=M;var E=R+S*w,N=0,O=0;g>w?(N=R+S*w/2,O=N):(N=R+T,O=E-T),r.setItemLayout(k,{angle:w,startAngle:N,endAngle:O,clockwise:L,cx:l,cy:u,r0:s,r:x?Na(M,D,[s,c]):c}),R=E}),I<wt&&y)if(I<=.001){var H=z/y;r.each(o,function(M,k){if(!isNaN(M)){var w=r.getItemLayout(k);w.angle=H;var E=0,N=0;H<g?(E=f+S*(k+1/2)*H,N=E):(E=f+S*k*H+T,N=f+S*(k+1)*H-T),w.startAngle=E,w.endAngle=N}})}else m=I/X,R=f,r.each(o,function(M,k){if(!isNaN(M)){var w=r.getItemLayout(k),E=w.angle===d?d:M*m,N=0,O=0;E<g?(N=R+S*E/2,O=N):(N=R+T,O=R+S*E-T),w.startAngle=N,w.endAngle=O,R+=S*E}})})}var $t=ye();function Ir(n){return{seriesType:n,reset:function(a,t){var e=t.findComponents({mainType:"legend"});if(!(!e||!e.length)){var r=a.getData();r.filterSelf(function(o){for(var i=r.getName(o),l=0;l<e.length;l++)if(!e[l].isSelected(i))return!1;return!0})}}}}var Gr=Math.PI/180;function Pt(n,a,t,e,r,o,i,l,u,c){if(n.length<2)return;function s(h){for(var d=h.rB,y=d*d,b=0;b<h.list.length;b++){var m=h.list[b],L=Math.abs(m.label.y-t),x=e+m.len,_=x*x,D=Math.sqrt(Math.abs((1-L*L/y)*_)),S=a+(D+m.len2)*r,C=S-m.label.x,T=m.targetTextWidth-C*r;Kt(m,T,!0),m.label.x=S}}function p(h){for(var d={list:[],maxY:0},y={list:[],maxY:0},b=0;b<h.length;b++)if(h[b].labelAlignTo==="none"){var m=h[b],L=m.label.y>t?y:d,x=Math.abs(m.label.y-t);if(x>=L.maxY){var _=m.label.x-a-m.len2*r,D=e+m.len,S=Math.abs(_)<D?Math.sqrt(x*x/(1-_*_/D/D)):D;L.rB=S,L.maxY=x}L.list.push(m)}s(d),s(y)}for(var f=n.length,v=0;v<f;v++)if(n[v].position==="outer"&&n[v].labelAlignTo==="labelLine"){var g=n[v].label.x-c;n[v].linePoints[1][0]+=g,n[v].label.x=c}Je(n,1,u,u+i)&&p(n)}function Rr(n,a,t,e,r,o,i,l){for(var u=[],c=[],s=Number.MAX_VALUE,p=-Number.MAX_VALUE,f=0;f<n.length;f++){var v=n[f].label;Ke(n[f])||(v.x<a?(s=Math.min(s,v.x),u.push(n[f])):(p=Math.max(p,v.x),c.push(n[f])))}for(var f=0;f<n.length;f++){var g=n[f];if(!Ke(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var v=g.label,h=g.linePoints,d=void 0;g.labelAlignTo==="edge"?v.x<a?d=h[2][0]-g.labelDistance-i-g.edgeDistance:d=i+r-g.edgeDistance-h[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?v.x<a?d=s-i-g.bleedMargin:d=i+r-p-g.bleedMargin:v.x<a?d=v.x-i-g.bleedMargin:d=i+r-v.x-g.bleedMargin,g.targetTextWidth=d,Kt(g,d,!1)}}Pt(c,a,t,e,1,r,o,i,l,p),Pt(u,a,t,e,-1,r,o,i,l,s);for(var f=0;f<n.length;f++){var g=n[f];if(!Ke(g)&&g.linePoints){var v=g.label,h=g.linePoints,y=g.labelAlignTo==="edge",b=v.style.padding,m=b?b[1]+b[3]:0,L=v.style.backgroundColor?0:m,x=g.rect.width+L,_=h[1][0]-h[2][0];y?v.x<a?h[2][0]=i+g.edgeDistance+x+g.labelDistance:h[2][0]=i+r-g.edgeDistance-x-g.labelDistance:(v.x<a?h[2][0]=v.x+g.labelDistance:h[2][0]=v.x-g.labelDistance,h[1][0]=h[2][0]+_),h[1][1]=h[2][1]=v.y}}}function Kt(n,a,t){if(n.labelStyleWidth==null){var e=n.label,r=e.style,o=n.rect,i=r.backgroundColor,l=r.padding,u=l?l[1]+l[3]:0,c=r.overflow,s=o.width+(i?0:u);if(a<s||t){if(c&&c.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",a-u);var p=e.getBoundingRect();e.setStyle("width",Math.ceil(p.width)),e.setStyle("backgroundColor",i)}else{var f=a-u,v=a<s?f:t?f>n.unconstrainedWidth?null:f:null;e.setStyle("width",v)}Zt(o,e)}}}function Zt(n,a){It.rect=n,Ba(It,a,Or)}var Or={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},It={};function Ke(n){return n.position==="center"}function Mr(n){var a=n.getData(),t=[],e,r,o=!1,i=(n.get("minShowLabelAngle")||0)*Gr,l=a.getLayout("viewRect"),u=a.getLayout("r"),c=l.width,s=l.x,p=l.y,f=l.height;function v(_){_.ignore=!0}function g(_){if(!_.ignore)return!0;for(var D in _.states)if(_.states[D].ignore===!1)return!0;return!1}a.each(function(_){var D=a.getItemGraphicEl(_),S=D.shape,C=D.getTextContent(),T=D.getTextGuideLine(),G=a.getItemModel(_),z=G.getModel("label"),I=z.get("position")||G.get(["emphasis","label","position"]),X=z.get("distanceToLabelLine"),R=z.get("alignTo"),H=fe(z.get("edgeDistance"),c),M=z.get("bleedMargin");M==null&&(M=Math.min(c,f)>200?10:2);var k=G.getModel("labelLine"),w=k.get("length");w=fe(w,c);var E=k.get("length2");if(E=fe(E,c),Math.abs(S.endAngle-S.startAngle)<i){U(C.states,v),C.ignore=!0,T&&(U(T.states,v),T.ignore=!0);return}if(g(C)){var N=(S.startAngle+S.endAngle)/2,O=Math.cos(N),Q=Math.sin(N),se,me,st,be;e=S.cx,r=S.cy;var ae=I==="inside"||I==="inner";if(I==="center")se=S.cx,me=S.cy,be="center";else{var Ee=(ae?(S.r+S.r0)/2*O:S.r*O)+e,Ve=(ae?(S.r+S.r0)/2*Q:S.r*Q)+r;if(se=Ee+O*3,me=Ve+Q*3,!ae){var lt=Ee+O*(w+u-S.r),ct=Ve+Q*(w+u-S.r),ut=lt+(O<0?-1:1)*E,vt=ct;R==="edge"?se=O<0?s+H:s+c-H:se=ut+(O<0?-X:X),me=vt,st=[[Ee,Ve],[lt,ct],[ut,vt]]}be=ae?"center":R==="edge"?O>0?"right":"left":O>0?"left":"right"}var le=Math.PI,re=0,ce=z.get("rotate");if(ot(ce))re=ce*(le/180);else if(I==="center")re=0;else if(ce==="radial"||ce===!0){var Qt=O<0?-N+le:-N;re=Qt}else if(ce==="tangential"&&I!=="outside"&&I!=="outer"){var ne=Math.atan2(O,Q);ne<0&&(ne=le*2+ne);var ea=Q>0;ea&&(ne=le+ne),re=ne-le}if(o=!!re,C.x=se,C.y=me,C.rotation=re,C.setStyle({verticalAlign:"middle"}),ae){C.setStyle({align:be});var Fe=C.states.select;Fe&&(Fe.x+=C.x,Fe.y+=C.y)}else{var ze=new Ze(0,0,0,0);Zt(ze,C),t.push({label:C,labelLine:T,position:I,len:w,len2:E,minTurnAngle:k.get("minTurnAngle"),maxSurfaceAngle:k.get("maxSurfaceAngle"),surfaceNormal:new B(O,Q),linePoints:st,textAlign:be,labelDistance:X,labelAlignTo:R,edgeDistance:H,bleedMargin:M,rect:ze,unconstrainedWidth:ze.width,labelStyleWidth:C.style.width})}D.setTextConfig({inside:ae})}}),!o&&n.get("avoidLabelOverlap")&&Rr(t,e,r,u,c,f,s,p);for(var h=0;h<t.length;h++){var d=t[h],y=d.label,b=d.labelLine,m=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:d.textAlign}),m&&(U(y.states,v),y.ignore=!0);var L=y.states.select;L&&(L.x+=y.x,L.y+=y.y)}if(b){var x=d.linePoints;m||!x?(U(b.states,v),b.ignore=!0):(Yt(x,d.minTurnAngle),vr(x,d.surfaceNormal,d.maxSurfaceAngle),b.setShape({points:x}),y.__hostTarget.textGuideLineConfig={anchor:new B(x[0][0],x[0][1])})}}}var kr=function(n){te(a,n);function a(t,e,r){var o=n.call(this)||this;o.z2=2;var i=new Re;return o.setTextContent(i),o.updateData(t,e,r,!0),o}return a.prototype.updateData=function(t,e,r,o){var i=this,l=t.hostModel,u=t.getItemModel(e),c=u.getModel("emphasis"),s=t.getItemLayout(e),p=Z(Ce(u.getModel("itemStyle"),s,!0),s);if(isNaN(p.startAngle)){i.setShape(p);return}if(o){i.setShape(p);var f=l.getShallow("animationType");l.ecModel.ssr?(pe(i,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),i.originX=p.cx,i.originY=p.cy):f==="scale"?(i.shape.r=s.r0,pe(i,{shape:{r:s.r}},l,e)):r!=null?(i.setShape({startAngle:r,endAngle:r}),pe(i,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},l,e)):(i.shape.endAngle=s.startAngle,de(i,{shape:{endAngle:s.endAngle}},l,e))}else za(i),de(i,{shape:p},l,e);i.useStyle(t.getItemVisual(e,"style")),Fa(i,u);var v=(s.startAngle+s.endAngle)/2,g=l.get("selectedOffset"),h=Math.cos(v)*g,d=Math.sin(v)*g,y=u.getShallow("cursor");y&&i.attr("cursor",y),this._updateLabel(l,t,e),i.ensureState("emphasis").shape=Z({r:s.r+(c.get("scale")&&c.get("scaleSize")||0)},Ce(c.getModel("itemStyle"),s)),Z(i.ensureState("select"),{x:h,y:d,shape:Ce(u.getModel(["select","itemStyle"]),s)}),Z(i.ensureState("blur"),{shape:Ce(u.getModel(["blur","itemStyle"]),s)});var b=i.getTextGuideLine(),m=i.getTextContent();b&&Z(b.ensureState("select"),{x:h,y:d}),Z(m.ensureState("select"),{x:h,y:d}),Wa(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},a.prototype._updateLabel=function(t,e,r){var o=this,i=e.getItemModel(r),l=i.getModel("labelLine"),u=e.getItemVisual(r,"style"),c=u&&u.fill,s=u&&u.opacity;Bt(o,Ya(i),{labelFetcher:e.hostModel,labelDataIndex:r,inheritColor:c,defaultOpacity:s,defaultText:t.getFormattedLabel(r,"normal")||e.getName(r)});var p=o.getTextContent();o.setTextConfig({position:null,rotation:null}),p.attr({z2:10});var f=i.get(["label","position"]);if(f!=="outside"&&f!=="outer")o.removeTextGuideLine();else{var v=this.getTextGuideLine();v||(v=new Rt,this.setTextGuideLine(v)),Ut(this,Ht(i),{stroke:c,opacity:Ua(l.get(["lineStyle","opacity"]),s,1)})}},a}(Vt),Nr=function(n){te(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return a.prototype.render=function(t,e,r,o){var i=t.getData(),l=this._data,u=this.group,c;if(!l&&i.count()>0){for(var s=i.getItemLayout(0),p=1;isNaN(s&&s.startAngle)&&p<i.count();++p)s=i.getItemLayout(p);s&&(c=s.startAngle)}if(this._emptyCircleSector&&u.remove(this._emptyCircleSector),i.count()===0&&t.get("showEmptyCircle")){var f=$t(t),v=new Vt({shape:Et(f)});v.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=v,u.add(v)}i.diff(l).add(function(g){var h=new kr(i,g,c);i.setItemGraphicEl(g,h),u.add(h)}).update(function(g,h){var d=l.getItemGraphicEl(h);d.updateData(i,g,c),d.off("click"),u.add(d),i.setItemGraphicEl(g,d)}).remove(function(g){var h=l.getItemGraphicEl(g);Ea(h,t,g)}).execute(),Mr(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=i)},a.prototype.dispose=function(){},a.prototype.containPoint=function(t,e){var r=e.getData(),o=r.getItemLayout(0);if(o){var i=t[0]-o.cx,l=t[1]-o.cy,u=Math.sqrt(i*i+l*l);return u<=o.r&&u>=o.r0}},a.type="pie",a}(Va);function Br(n,a,t){a=Be(a)&&{coordDimensions:a}||Z({encodeDefine:n.getEncode()},a);var e=n.getSource(),r=Ha(e,a).dimensions,o=new Xa(r,n);return o.initData(e,t),o}var Er=function(){function n(a,t){this._getDataWithEncodedVisual=a,this._getRawData=t}return n.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},n.prototype.containName=function(a){var t=this._getRawData();return t.indexOfName(a)>=0},n.prototype.indexOfName=function(a){var t=this._getDataWithEncodedVisual();return t.indexOfName(a)},n.prototype.getItemVisual=function(a,t){var e=this._getDataWithEncodedVisual();return e.getItemVisual(a,t)},n}(),Vr=ye(),Jt=function(n){te(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Er(et(this.getData,this),et(this.getRawData,this)),this._defaultLabelLine(t)},a.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return Br(this,{coordDimensions:["value"],encodeDefaulter:J(ja,this)})},a.prototype.getDataParams=function(t){var e=this.getData(),r=Vr(e),o=r.seats;if(!o){var i=[];e.each(e.mapDimension("value"),function(u){i.push(u)}),o=r.seats=qa(i,e.hostModel.get("percentPrecision"))}var l=n.prototype.getDataParams.call(this,t);return l.percent=o[t]||0,l.$vars.push("percent"),l},a.prototype._defaultLabelLine=function(t){$a(t,"labelLine",["show"]);var e=t.labelLine,r=t.emphasis.labelLine;e.show=e.show&&t.label.show,r.show=r.show&&t.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(Ka);Za({fullType:Jt.type,getCoord2:function(n){return n.getShallow("center")}});function zr(n){return{seriesType:n,reset:function(a,t){var e=a.getData();e.filterSelf(function(r){var o=e.mapDimension("value"),i=e.get(o,r);return!(ot(i)&&!isNaN(i)&&i<0)})}}}function Fr(n){n.registerChartView(Nr),n.registerSeriesModel(Jt),Ja("pie",n.registerAction),n.registerLayout(J(Pr,"pie")),n.registerProcessor(Ir("pie")),n.registerProcessor(zr("pie"))}const Gt={street:"街道",community:"社区",warningStatus:"预警状态",age:"年龄",gender:"性别",tempProtect:"临时庇护"},Wr=zt({__name:"PieChart",props:{dataMap:{},pieName:{}},setup(n){Oe([Qa,Fr,wr,er,yr,tr]);const a=Me(),t=n;let e;Ye(a,i=>{if(i){e=ar(i);const l={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:t.pieName,type:"pie",radius:"50%",data:t.dataMap.map(u=>({name:u.tag,value:u.value})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};l&&e.setOption(l)}}),Ye(()=>t.dataMap,i=>{e.setOption({series:[{name:t.pieName,type:"pie",radius:"50%",data:i.map(l=>({name:l.tag,value:l.value})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},{deep:!0});const r=Me();let o;return Ye(r,i=>{i?(o=new ResizeObserver(()=>{e&&e.resize()}),o.observe(i)):(o?.disconnect(),o=void 0)}),(i,l)=>(we(),Te("div",{ref_key:"containerRef",ref:r,class:"container"},[l[0]||(l[0]=V("div",{class:"backgound"},null,-1)),V("div",{ref_key:"echartRef",ref:a,class:"payload"},null,512)],512))}}),Yr=Ft(Wr,[["__scopeId","data-v-1c8b443b"]]),Ur={class:"layout"},Hr={class:"box"},Xr={class:"total"},jr={class:"title total__count number"},qr={class:"box"},$r={class:"monthly"},Kr={class:"monthly-count"},Zr={class:"record-in text"},Jr={class:"number"},Qr={class:"record-out text"},en={class:"number"},tn={class:"static-area"},an={class:"static"},rn={class:"title"},nn={class:"chart-area"},on=zt({__name:"Statics",setup(n){const a=Me([]);function t(u,c){const s=u.reduce((p,f)=>{const v=f[c],g=typeof v=="boolean"?v===!0?"是":"否":String(v);return p[g]?p[g].push(f):p[g]=[f],p},Object.create(null));return pt(s).map(p=>({tag:p,value:s[p].length}))}const e=Ue(()=>pt(Gt).reduce((u,c)=>{const s=Gt[c],p=t(a.value,c);return u.push({title:s,categoryCount:p}),u},[]));function r(){a.value=ta()}r();const o=Me(Date.now()),i=Ue(()=>{const u=gt(new Date(o.value));return ft("in",u)}),l=Ue(()=>{const u=gt(new Date(o.value));return ft("out",u)});return(u,c)=>{const s=rr("el-date-picker");return we(),Te("div",Ur,[V("div",Hr,[V("div",Xr,[c[1]||(c[1]=V("span",{class:"title total__label"},"参与者总数：",-1)),V("span",jr,xe(a.value.length),1)])]),V("div",qr,[V("div",$r,[c[4]||(c[4]=V("span",{class:"title"},"月度录入/删除：",-1)),xt(s,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=p=>o.value=p),type:"month",placeholder:"选择一个月份"},null,8,["modelValue"]),V("div",Kr,[V("span",Zr,[c[2]||(c[2]=St("录入： ",-1)),V("span",Jr,xe(i.value),1)]),V("span",Qr,[c[3]||(c[3]=St(" 删除： ",-1)),V("span",en,xe(l.value),1)])])])]),V("div",tn,[(we(!0),Te(nr,null,ir(e.value,p=>(we(),Te("div",an,[V("span",rn,xe(p.title),1),V("div",nn,[xt(Yr,{"data-map":p.categoryCount,"pie-name":p.title},null,8,["data-map","pie-name"])])]))),256))])])}}}),gn=Ft(on,[["__scopeId","data-v-d3ac4eab"]]);export{gn as default};
