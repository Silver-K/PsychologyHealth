import{M as K,m as O}from"./minors-D72bfAYt.js";import{g as q}from"./table-B8sZ3RHj.js";import{g as _,a as v,b as G,r as J,s as Q}from"./minors-BNGPOB-r.js";import{M as W}from"./MinorInput-BOxBrM_Z.js";import{d as k,r as d,s as X,a as E,g as o,b as g,j as c,h as n,x as Y,o as M,f as r,u as Z,y as ee,E as b,z as te,p as oe,A as se}from"./index-COYtomWE.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-6PSWH6Jr.js";import"./MultiFileInput-BQrdZzvc.js";const ne={class:"minors-table"},ae={class:"dlg-body"},le={class:"top"},re={class:"table"},y="whsg/stash/input-minor",ie=k({__name:"MinorsTable",setup(V){const h=oe(),i=d(_());function I(e){h.push(`/detail/${e.id}`)}function w(e){const{id:t}=e,s=i.value.find(f=>f.id===t);s&&(s.tempProtect=!s.tempProtect,Q(i.value))}function A(e){return e.tempProtect?"取消庇护":"庇护"}const T=q({keys:O.slice(),renderer:e=>{if(e==="tempProtect")return({rowData:t})=>o("span",null,[t.tempProtect?"是":"否"])},width:150,titleObj:K},{key:"indexor",title:"序号",width:100,cellRenderer({rowIndex:e}){return o("span",null,[e+1])}},{key:"operator",title:"操作",width:260,cellRenderer({rowData:e}){return o("div",null,[o("span",{class:"gap-12 text-primary text-hoverable-primary clickable",onClick:()=>I(e)},[r("查看")]),o("span",{class:"gap-12 text-primary text-hoverable-primary clickable",onClick:()=>N(e)},[r("删除")]),o("span",{class:"gap-12 text-primary text-hoverable-primary clickable",onClick:()=>w(e)},[A(e)])])}}),B=({rowData:e})=>e.tempProtect?"is-protect":"",u=d(!1),a=d(v());function S(){u.value=!0;const e=Y(y);e?a.value=e:a.value=v()}function x(){u.value=!1}function P(){a.value=v()}function D(){P(),x()}function L(){te(y)}function R(){ee(y,a.value,"json")===0&&b.success("暂存成功")}function j(){G(a.value)===0?(b({message:"录入成功",type:"success"}),x(),L()):b({message:"录入失败",type:"error"}),i.value=_()}const p=d(""),z=X(e=>{i.value=_(e)}),m=()=>{z(p.value)};async function N(e){await se.confirm("确定要删除该参与者吗？","删除",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"});const{id:t}=e;J(t),m()}return(e,t)=>{const s=c("ElButton"),f=c("ElDialog"),U=c("ElInput"),$=c("ElTableV2"),F=c("ElAutoResizer");return M(),E("div",ne,[o(f,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l),title:"录入信息","close-on-click-modal":!1},{footer:n(()=>[o(s,{class:"opt-btn",onClick:D},{default:n(()=>t[3]||(t[3]=[r("放弃",-1)])),_:1,__:[3]}),o(s,{type:"warning",class:"opt-btn",onClick:R},{default:n(()=>t[4]||(t[4]=[r("暂存",-1)])),_:1,__:[4]}),o(s,{type:"primary",class:"opt-btn",onClick:j},{default:n(()=>t[5]||(t[5]=[r("提交",-1)])),_:1,__:[5]})]),default:n(()=>[g("div",ae,[o(W,{"input-mode":"",form:a.value,"onUpdate:form":t[0]||(t[0]=l=>a.value=l)},null,8,["form"])])]),_:1},8,["modelValue"]),g("div",le,[o(U,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=l=>p.value=l),type:"search",placeholder:"输入需要搜索的关键字",onChange:m},{append:n(()=>[o(s,{class:"search-enter",onClick:m},{default:n(()=>t[6]||(t[6]=[r("搜索",-1)])),_:1,__:[6]})]),_:1},8,["modelValue"]),o(s,{class:"record-btn",type:"primary",onClick:S},{default:n(()=>t[7]||(t[7]=[r("录入",-1)])),_:1,__:[7]})]),g("div",re,[o(F,null,{default:n(({width:l,height:H})=>[o($,{class:"minors-table__inner",columns:Z(T),"row-class":B,data:i.value,width:l,height:H},null,8,["columns","data","width","height"])]),_:1})])])}}}),ce=C(ie,[["__scopeId","data-v-51ab3738"]]),ue={class:"card"},de=k({__name:"MinorsList",setup(V){return(h,i)=>(M(),E("div",ue,[o(ce)]))}}),xe=C(de,[["__scopeId","data-v-6ee9a50c"]]);export{xe as default};
