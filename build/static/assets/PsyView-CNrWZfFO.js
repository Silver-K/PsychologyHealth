import{d as Ke,r as q,w as Se,a as $,o as B,b as K,c as xe,g as F,h as V,j as ee,F as te,G as fe,B as ae,i as Le,f as J,t as he,u as va,l as ca,N as fa}from"./index-COYtomWE.js";import{P as ha}from"./minors-D72bfAYt.js";import{S as se,e as O,c as Fe,a as Ht,i as me,b as pa,m as da,p as ga,d as ma,f as ya,C as ba,g as le,h as xa,j as De,k as Sa,l as Aa,n as rt,o as _a,q as Da,r as Ca,s as re,t as nt,A as Ae,_ as H,u as Zt,v as Ue,w as Y,x as Wt,y as La,z as ye,B as ve,D as wa,O as Ta,E as ka,F as Ma,G as it,H as ot,I as Ea,J as Ia,K as Pa,L as Oa,M as Ne,N as Na,P as $t,Q as Xt,R as we,T as Ba,U as Va,V as st,W as Ga,X as za,Y as Ra,Z as lt,$ as ut,a0 as _e,a1 as Fa,a2 as Ua,a3 as Ha,a4 as Za,a5 as Wa,a6 as jt,a7 as de,a8 as ke,a9 as vt,aa as ct,ab as He,ac as $a,ad as Xa,ae as ja,af as qa,ag as Ja,ah as Ka,ai as Ye,aj as Ce,ak as Ya,al as Qa,am as ft,an as ht,ao as er,ap as Ze,aq as tr,ar as pt,as as We,at as ar,au as rr,av as Me,aw as nr,ax as Pe,ay as Qe,az as ir,aA as or,aB as dt,aC as qt,aD as $e,aE as Te,aF as gt,aG as sr,aH as lr,aI as ur,aJ as Ee,aK as Jt,aL as vr,aM as mt,aN as yt,aO as Kt,aP as cr,aQ as fr,aR as bt,aS as xt,aT as St,aU as Be,aV as At,aW as hr,aX as pr,aY as dr,aZ as gr,a_ as _t,a$ as mr,b0 as yr,b1 as br,b2 as xr,b3 as Sr,b4 as Ar,b5 as _r}from"./installCanvasRenderer-BWIarJz0.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Dr}from"./MultiFileInput-BQrdZzvc.js";import{d as Cr,g as Lr}from"./utils-6PSWH6Jr.js";import{g as Ve,s as Dt}from"./minors-BNGPOB-r.js";var wr=function(){function r(e){this.coordSysDims=[],this.axisMap=Fe(),this.categoryAxisMap=Fe(),this.coordSysName=e}return r}();function Tr(r){var e=r.get("coordinateSystem"),t=new wr(e),a=kr[e];if(a)return a(r,t,t.axisMap,t.categoryAxisMap),t}var kr={cartesian2d:function(r,e,t,a){var n=r.getReferringComponents("xAxis",se).models[0],i=r.getReferringComponents("yAxis",se).models[0];e.coordSysDims=["x","y"],t.set("x",n),t.set("y",i),pe(n)&&(a.set("x",n),e.firstCategoryDimIndex=0),pe(i)&&(a.set("y",i),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(r,e,t,a){var n=r.getReferringComponents("singleAxis",se).models[0];e.coordSysDims=["single"],t.set("single",n),pe(n)&&(a.set("single",n),e.firstCategoryDimIndex=0)},polar:function(r,e,t,a){var n=r.getReferringComponents("polar",se).models[0],i=n.findAxisModel("radiusAxis"),o=n.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",i),t.set("angle",o),pe(i)&&(a.set("radius",i),e.firstCategoryDimIndex=0),pe(o)&&(a.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(r,e,t,a){e.coordSysDims=["lng","lat"]},parallel:function(r,e,t,a){var n=r.ecModel,i=n.getComponent("parallel",r.get("parallelIndex")),o=e.coordSysDims=i.dimensions.slice();O(i.parallelAxisIndex,function(s,u){var l=n.getComponent("parallelAxis",s),c=o[u];t.set(c,l),pe(l)&&(a.set(c,l),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=u))})},matrix:function(r,e,t,a){var n=r.getReferringComponents("matrix",se).models[0];e.coordSysDims=["x","y"];var i=n.getDimensionModel("x"),o=n.getDimensionModel("y");t.set("x",i),t.set("y",o),a.set("x",i),a.set("y",o)}};function pe(r){return r.get("type")==="category"}function Mr(r,e){var t=r.get("coordinateSystem"),a=ba.get(t),n;return e&&e.coordSysDims&&(n=le(e.coordSysDims,function(i){var o={name:i},s=e.axisMap.get(i);if(s){var u=s.get("type");o.type=xa(u)}return o})),n||(n=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),n}function Er(r,e,t){var a,n;return t&&O(r,function(i,o){var s=i.coordDim,u=t.categoryAxisMap.get(s);u&&(a==null&&(a=o),i.ordinalMeta=u.getOrdinalMeta(),e&&(i.createInvertedIndices=!0)),i.otherDims.itemName!=null&&(n=!0)}),!n&&a!=null&&(r[a].otherDims.itemName=0),a}function Ir(r,e,t){t=t||{};var a=e.getSourceManager(),n,i=!1;n=a.getSource(),i=n.sourceFormat===Ht;var o=Tr(e),s=Mr(e,o),u=t.useEncodeDefaulter,l=me(u)?u:u?pa(da,s,e):null,c={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:l,canOmitUnusedDimensions:!i},f=ga(n,c),p=Er(f.dimensions,t.createInvertedIndices,o),v=i?null:a.getSharedDataStore(f),h=ma(e,{schema:f,store:v}),d=new ya(f,e);d.setCalculationInfo(h);var y=p!=null&&Pr(n)?function(m,g,b,C){return C===p?b:this.defaultDimValueGetter(m,g,b,C)}:null;return d.hasItemOption=!1,d.initData(i?n:v,null,y),d}function Pr(r){if(r.sourceFormat===Ht){var e=Or(r.data||[]);return!De(Sa(e))}}function Or(r){for(var e=0;e<r.length&&r[e]==null;)e++;return r[e]}var Yt=typeof Float32Array<"u",Nr=Yt?Float32Array:Array;function ge(r){return De(r)?Yt?new Float32Array(r):r:new Nr(r)}var Br=function(){function r(){}return r.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},r.prototype.getCoordSysModel=function(){},r}(),Ct=[0,1],Vr=function(){function r(e,t,a){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=a||[0,0]}return r.prototype.contain=function(e){var t=this._extent,a=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return e>=a&&e<=n},r.prototype.containData=function(e){return this.scale.contain(this.scale.parse(e))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(e){return Aa(e||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(e,t){var a=this._extent;a[0]=e,a[1]=t},r.prototype.dataToCoord=function(e,t){var a=this._extent,n=this.scale;return e=n.normalize(n.parse(e)),this.onBand&&n.type==="ordinal"&&(a=a.slice(),Lt(a,n.count())),rt(e,Ct,a,t)},r.prototype.coordToData=function(e,t){var a=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(a=a.slice(),Lt(a,n.count()));var i=rt(e,a,Ct,t);return this.scale.scale(i)},r.prototype.pointToData=function(e,t){},r.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),a=_a(this,t,{breakTicks:e.breakTicks,pruneByBreak:e.pruneByBreak}),n=a.ticks,i=le(n,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return Gr(this,i,o,e.clamp),i},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var a=this.scale.getMinorTicks(t),n=le(a,function(i){return le(i,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return n},r.prototype.getViewLabels=function(e){return e=e||nt(Ae.determine),Da(this,e).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),a=t[1]-t[0]+(this.onBand?1:0);a===0&&(a=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/a},r.prototype.calculateCategoryInterval=function(e){return e=e||nt(Ae.determine),Ca(this,e)},r}();function Lt(r,e){var t=r[1]-r[0],a=e,n=t/a/2;r[0]+=n,r[1]-=n}function Gr(r,e,t,a){var n=e.length;if(!r.onBand||t||!n)return;var i=r.getExtent(),o,s;if(n===1)e[0].coord=i[0],e[0].onBand=!0,o=e[1]={coord:i[1],tickValue:e[0].tickValue,onBand:!0};else{var u=e[n-1].tickValue-e[0].tickValue,l=(e[n-1].coord-e[0].coord)/u;O(e,function(v){v.coord-=l/2,v.onBand=!0});var c=r.scale.getExtent();s=1+c[1]-e[n-1].tickValue,o={coord:e[n-1].coord+l*s,tickValue:c[1]+1,onBand:!0},e.push(o)}var f=i[0]>i[1];p(e[0].coord,i[0])&&(a?e[0].coord=i[0]:e.shift()),a&&p(i[0],e[0].coord)&&e.unshift({coord:i[0],onBand:!0}),p(i[1],o.coord)&&(a?o.coord=i[1]:e.pop()),a&&p(o.coord,i[1])&&e.push({coord:i[1],onBand:!0});function p(v,h){return v=re(v),h=re(h),f?v>h:v<h}}var Qt={left:0,right:0,top:0,bottom:0},Ie=["25%","25%"],zr=function(r){H(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.mergeDefaultAndTheme=function(t,a){var n=Zt(t.outerBounds);r.prototype.mergeDefaultAndTheme.apply(this,arguments),n&&t.outerBounds&&Ue(t.outerBounds,n)},e.prototype.mergeOption=function(t,a){r.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&t.outerBounds&&Ue(this.option.outerBounds,t.outerBounds)},e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:Qt,outerBoundsContain:"all",outerBoundsClampWidth:Ie[0],outerBoundsClampHeight:Ie[1],backgroundColor:Y.color.transparent,borderWidth:1,borderColor:Y.color.neutral30},e}(Wt),Xe=function(r){H(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",se).models[0]},e.type="cartesian2dAxis",e}(Wt);La(Xe,Br);var ea={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:Y.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:Y.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:Y.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[Y.color.backgroundTint,Y.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:Y.color.neutral00,borderColor:Y.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},Rr=ve({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},ea),tt=ve({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:Y.color.axisMinorSplitLine,width:1}}},ea),Fr=ve({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},tt),Ur=ye({logBase:10},tt);const Hr={category:Rr,value:tt,time:Fr,log:Ur};var Zr={value:1,category:1,time:1,log:1};function wt(r,e,t,a){O(Zr,function(n,i){var o=ve(ve({},Hr[i],!0),a,!0),s=function(u){H(l,u);function l(){var c=u!==null&&u.apply(this,arguments)||this;return c.type=e+"Axis."+i,c}return l.prototype.mergeDefaultAndTheme=function(c,f){var p=wa(this),v=p?Zt(c):{},h=f.getTheme();ve(c,h.get(i+"Axis")),ve(c,this.getDefaultOption()),c.type=Tt(c),p&&Ue(c,v,p)},l.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=Ta.createByAxisModel(this))},l.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},l.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},l.prototype.updateAxisBreaks=function(c){return{breaks:[]}},l.type=e+"Axis."+i,l.defaultOption=o,l}(t);r.registerComponentModel(s)}),r.registerSubTypeDefaulter(e+"Axis",Tt)}function Tt(r){return r.type||(r.data?"category":"value")}var Wr=function(){function r(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return r.prototype.getAxis=function(e){return this._axes[e]},r.prototype.getAxes=function(){return le(this._dimList,function(e){return this._axes[e]},this)},r.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),ka(this.getAxes(),function(t){return t.scale.type===e})},r.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},r}(),je=["x","y"];function kt(r){return(r.type==="interval"||r.type==="time")&&!r.hasBreaks()}var $r=function(r){H(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=je,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,a=this.getAxis("y").scale;if(!(!kt(t)||!kt(a))){var n=t.getExtent(),i=a.getExtent(),o=this.dataToPoint([n[0],i[0]]),s=this.dataToPoint([n[1],i[1]]),u=n[1]-n[0],l=i[1]-i[0];if(!(!u||!l)){var c=(s[0]-o[0])/u,f=(s[1]-o[1])/l,p=o[0]-n[0]*c,v=o[1]-i[0]*f,h=this._transform=[c,0,0,f,p,v];this._invTransform=Ma([],h)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var a=this.getAxis("x"),n=this.getAxis("y");return a.contain(a.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,a){var n=this.dataToPoint(t),i=this.dataToPoint(a),o=this.getArea(),s=new it(n[0],n[1],i[0]-n[0],i[1]-n[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,a,n){n=n||[];var i=t[0],o=t[1];if(this._transform&&i!=null&&isFinite(i)&&o!=null&&isFinite(o))return ot(n,t,this._transform);var s=this.getAxis("x"),u=this.getAxis("y");return n[0]=s.toGlobalCoord(s.dataToCoord(i,a)),n[1]=u.toGlobalCoord(u.dataToCoord(o,a)),n},e.prototype.clampData=function(t,a){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,o=n.getExtent(),s=i.getExtent(),u=n.parse(t[0]),l=i.parse(t[1]);return a=a||[],a[0]=Math.min(Math.max(Math.min(o[0],o[1]),u),Math.max(o[0],o[1])),a[1]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),a},e.prototype.pointToData=function(t,a,n){if(n=n||[],this._invTransform)return ot(n,t,this._invTransform);var i=this.getAxis("x"),o=this.getAxis("y");return n[0]=i.coordToData(i.toLocalCoord(t[0]),a),n[1]=o.coordToData(o.toLocalCoord(t[1]),a),n},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var a=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(a[0],a[1])-t,o=Math.min(n[0],n[1])-t,s=Math.max(a[0],a[1])-i+t,u=Math.max(n[0],n[1])-o+t;return new it(i,o,s,u)},e}(Wr),Xr=function(r){H(e,r);function e(t,a,n,i,o){var s=r.call(this,t,a,n)||this;return s.index=0,s.type=i||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var a=this.getExtent();return a[0]=this.toGlobalCoord(a[0]),a[1]=this.toGlobalCoord(a[1]),t&&a[0]>a[1]&&a.reverse(),a},e.prototype.pointToData=function(t,a){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),a)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(Vr);function jr(r,e,t){var a=Ea.prototype,n=a.getTicks.call(t),i=a.getTicks.call(t,{expandToNicedExtent:!0}),o=n.length-1,s=a.getInterval.call(t),u=Ia(r,e),l=u.extent,c=u.fixMin,f=u.fixMax;r.type==="log"&&(l=Pa(r.base,l,!0)),r.setBreaksFromOption(Oa(e)),r.setExtent(l[0],l[1]),r.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:f});var p=a.getExtent.call(r);c&&(l[0]=p[0]),f&&(l[1]=p[1]);var v=a.getInterval.call(r),h=l[0],d=l[1];if(c&&f)v=(d-h)/o;else if(c)for(d=l[0]+v*o;d<l[1]&&isFinite(d)&&isFinite(l[1]);)v=Ne(v),d=l[0]+v*o;else if(f)for(h=l[1]-v*o;h>l[0]&&isFinite(h)&&isFinite(l[0]);)v=Ne(v),h=l[1]-v*o;else{var y=r.getTicks().length-1;y>o&&(v=Ne(v));var m=v*o;d=Math.ceil(l[1]/v)*v,h=re(d-m),h<0&&l[0]>=0?(h=0,d=re(m)):d>0&&l[1]<=0&&(d=0,h=-re(m))}var g=(n[0].value-i[0].value)/s,b=(n[o].value-i[o].value)/s;a.setExtent.call(r,h+v*g,d+v*b),a.setInterval.call(r,v),(g||b)&&a.setNiceExtent.call(r,h+v,d-v)}var Mt=[[3,1],[0,2]],qr=function(){function r(e,t,a){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=je,this._initCartesian(e,t,a),this.model=e}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(e,t){var a=this._axesMap;this._updateScale(e,this.model);function n(o){var s,u=Ra(o),l=u.length;if(l){for(var c=[],f=l-1;f>=0;f--){var p=+u[f],v=o[p],h=v.model,d=v.scale;lt(d)&&h.get("alignTicks")&&h.get("interval")==null?c.push(v):(ut(d,h),lt(d)&&(s=v))}c.length&&(s||(s=c.pop(),ut(s.scale,s.model)),O(c,function(y){jr(y.scale,y.model,s.scale)}))}}n(a.x),n(a.y);var i={};O(a.x,function(o){Et(a,"y",o,i)}),O(a.y,function(o){Et(a,"x",o,i)}),this.resize(this.model,t)},r.prototype.resize=function(e,t,a){var n=Na(e,t),i=this._rect=$t(e.getBoxLayoutParams(),n.refContainer),o=this._axesMap,s=this._coordsList,u=e.get("containLabel");if(ta(o,i),!a){var l=Kr(i,s,o,u,t),c=void 0;if(u)c=Ot(i.clone(),"axisLabel",null,i,o,l,n);else{var f=Yr(e,i,n),p=f.outerBoundsRect,v=f.parsedOuterBoundsContain,h=f.outerBoundsClamp;p&&(c=Ot(p,v,h,i,o,l,n))}aa(i,o,Ae.determine,null,c,n)}O(this._coordsList,function(d){d.calcAffineTransform()})},r.prototype.getAxis=function(e,t){var a=this._axesMap[e];if(a!=null)return a[t||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var a="x"+e+"y"+t;return this._coordsMap[a]}Xt(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===e||i[n].getAxis("y").index===t)return i[n]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(e,t,a){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.dataToPoint(a):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(a)):null},r.prototype.convertFromPixel=function(e,t,a){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.pointToData(a):n.axis?n.axis.coordToData(n.axis.toLocalCoord(a)):null},r.prototype._findConvertTarget=function(e){var t=e.seriesModel,a=e.xAxisModel||t&&t.getReferringComponents("xAxis",se).models[0],n=e.yAxisModel||t&&t.getReferringComponents("yAxis",se).models[0],i=e.gridModel,o=this._coordsList,s,u;if(t)s=t.coordinateSystem,we(o,s)<0&&(s=null);else if(a&&n)s=this.getCartesian(a.componentIndex,n.componentIndex);else if(a)u=this.getAxis("x",a.componentIndex);else if(n)u=this.getAxis("y",n.componentIndex);else if(i){var l=i.coordinateSystem;l===this&&(s=this._coordsList[0])}return{cartesian:s,axis:u}},r.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},r.prototype._initCartesian=function(e,t,a){var n=this,i=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},u={x:0,y:0};if(t.eachComponent("xAxis",l("x"),this),t.eachComponent("yAxis",l("y"),this),!u.x||!u.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,O(s.x,function(c,f){O(s.y,function(p,v){var h="x"+f+"y"+v,d=new $r(h);d.master=n,d.model=e,n._coordsMap[h]=d,n._coordsList.push(d),d.addAxis(c),d.addAxis(p)})});function l(c){return function(f,p){if(Ge(f,e)){var v=f.get("position");c==="x"?v!=="top"&&v!=="bottom"&&(v=o.bottom?"top":"bottom"):v!=="left"&&v!=="right"&&(v=o.left?"right":"left"),o[v]=!0;var h=new Xr(c,Ba(f),[0,0],f.get("type"),v),d=h.type==="category";h.onBand=d&&f.get("boundaryGap"),h.inverse=f.get("inverse"),f.axis=h,h.model=f,h.grid=i,h.index=p,i._axesList.push(h),s[c][p]=h,u[c]++}}}},r.prototype._updateScale=function(e,t){O(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var i=n.model.get("categorySortInfo");n.scale.setSortInfo(i)}}),e.eachSeries(function(n){if(Va(n)){var i=st(n),o=i.xAxisModel,s=i.yAxisModel;if(!Ge(o,t)||!Ge(s,t))return;var u=this.getCartesian(o.componentIndex,s.componentIndex),l=n.getData(),c=u.getAxis("x"),f=u.getAxis("y");a(l,c),a(l,f)}},this);function a(n,i){O(Ga(n,i.dim),function(o){i.scale.unionExtentFromData(n,o)})}},r.prototype.getTooltipAxes=function(e){var t=[],a=[];return O(this.getCartesians(),function(n){var i=e!=null&&e!=="auto"?n.getAxis(e):n.getBaseAxis(),o=n.getOtherAxis(i);we(t,i)<0&&t.push(i),we(a,o)<0&&a.push(o)}),{baseAxes:t,otherAxes:a}},r.create=function(e,t){var a=[];return e.eachComponent("grid",function(n,i){var o=new r(n,e,t);o.name="grid_"+i,o.resize(n,t,!0),n.coordinateSystem=o,a.push(o)}),e.eachSeries(function(n){za({targetModel:n,coordSysType:"cartesian2d",coordSysProvider:i});function i(){var o=st(n),s=o.xAxisModel,u=o.yAxisModel,l=s.getCoordSysModel(),c=l.coordinateSystem;return c.getCartesian(s.componentIndex,u.componentIndex)}}),a},r.dimensions=je,r}();function Ge(r,e){return r.getCoordSysModel()===e}function Et(r,e,t,a){t.getAxesOnZeroOf=function(){return i?[i]:[]};var n=r[e],i,o=t.model,s=o.get(["axisLine","onZero"]),u=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(u!=null)It(n[u])&&(i=n[u]);else for(var l in n)if(n.hasOwnProperty(l)&&It(n[l])&&!a[c(n[l])]){i=n[l];break}i&&(a[c(i)]=!0);function c(f){return f.dim+"_"+f.index}}function It(r){return r&&r.type!=="category"&&r.type!=="time"&&Xa(r)}function Jr(r,e){var t=r.getExtent(),a=t[0]+t[1];r.toGlobalCoord=r.dim==="x"?function(n){return n+e}:function(n){return a-n+e},r.toLocalCoord=r.dim==="x"?function(n){return n-e}:function(n){return a-n+e}}function ta(r,e){O(r.x,function(t){return Pt(t,e.x,e.width)}),O(r.y,function(t){return Pt(t,e.y,e.height)})}function Pt(r,e,t){var a=[0,t],n=r.inverse?1:0;r.setExtent(a[n],a[1-n]),Jr(r,e)}function Ot(r,e,t,a,n,i,o){aa(a,n,Ae.estimate,e,!1,o);var s=[0,0,0,0];l(0),l(1),c(a,0,NaN),c(a,1,NaN);var u=Ha(s,function(p){return p>0})==null;return Za(a,s,!0,!0,t),ta(n,a),u;function l(p){O(n[de[p]],function(v){if(_e(v.model)){var h=i.ensureRecord(v.model),d=h.labelInfoList;if(d)for(var y=0;y<d.length;y++){var m=d[y],g=v.scale.normalize(Wa(m.label).tickValue);g=p===1?1-g:g,c(m.rect,p,g),c(m.rect,1-p,NaN)}var b=h.nameLayout;if(b){var g=jt(h.nameLocation)?.5:NaN;c(b.rect,p,g),c(b.rect,1-p,NaN)}}})}function c(p,v,h){var d=r[de[v]]-p[de[v]],y=p[ke[v]]+p[de[v]]-(r[ke[v]]+r[de[v]]);d=f(d,1-h),y=f(y,h);var m=Mt[v][0],g=Mt[v][1];s[m]=vt(s[m],d),s[g]=vt(s[g],y)}function f(p,v){return p>0&&!Ja(v)&&v>1e-4&&(p/=v),p}}function Kr(r,e,t,a,n){var i=new Ua(Qr);return O(t,function(o){return O(o,function(s){if(_e(s.model)){var u=!a;s.axisBuilder=Fa(r,e,s.model,n,i,u)}})}),i}function aa(r,e,t,a,n,i){var o=t===Ae.determine;O(e,function(l){return O(l,function(c){_e(c.model)&&($a(c.axisBuilder,r,c.model),c.axisBuilder.build(o?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:n}))})});var s={x:0,y:0};u(0),u(1);function u(l){s[de[1-l]]=r[ke[l]]<=i.refContainer[ke[l]]*.5?0:1-l===1?2:1}O(e,function(l,c){return O(l,function(f){_e(f.model)&&((a==="all"||o)&&f.axisBuilder.build({axisName:!0},{nameMarginLevel:s[c]}),o&&f.axisBuilder.build({axisLine:!0}))})})}function Yr(r,e,t){var a,n=r.get("outerBoundsMode",!0);n==="same"?a=e.clone():(n==null||n==="auto")&&(a=$t(r.get("outerBounds",!0)||Qt,t.refContainer));var i=r.get("outerBoundsContain",!0),o;i==null||i==="auto"||we(["all","axisLabel"],i)<0?o="all":o=i;var s=[ct(He(r.get("outerBoundsClampWidth",!0),Ie[0]),e.width),ct(He(r.get("outerBoundsClampHeight",!0),Ie[1]),e.height)];return{outerBoundsRect:a,parsedOuterBoundsContain:o,outerBoundsClamp:s}}var Qr=function(r,e,t,a,n,i){var o=t.axis.dim==="x"?"y":"x";ja(r,e,t,a,n,i),jt(r.nameLocation)||O(e.recordMap[o],function(s){s&&s.labelInfoList&&s.dirVec&&qa(s.labelInfoList,s.dirVec,a,n)})},qe=Ka();function en(r,e,t,a){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitArea"),o=i.getModel("areaStyle"),s=o.get("color"),u=a.coordinateSystem.getRect(),l=n.getTicksCoords({tickModel:i,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(l.length){var c=s.length,f=qe(r).splitAreaColors,p=Fe(),v=0;if(f)for(var h=0;h<l.length;h++){var d=f.get(l[h].tickValue);if(d!=null){v=(d+(c-1)*h)%c;break}}var y=n.toGlobalCoord(l[0].coord),m=o.getAreaStyle();s=De(s)?s:[s];for(var h=1;h<l.length;h++){var g=n.toGlobalCoord(l[h].coord),b=void 0,C=void 0,S=void 0,A=void 0;n.isHorizontal()?(b=y,C=u.y,S=g-b,A=u.height,y=b+S):(b=u.x,C=y,S=u.width,A=g-C,y=C+A);var _=l[h-1].tickValue;_!=null&&p.set(_,v),e.add(new Ye({anid:_!=null?"area_"+_:null,shape:{x:b,y:C,width:S,height:A},style:ye({fill:s[v]},m),autoBatch:!0,silent:!0})),v=(v+1)%c}qe(r).splitAreaColors=p}}}function tn(r){qe(r).splitAreaColors=null}var an=["splitArea","splitLine","minorSplitLine","breakArea"],ra=function(r){H(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,a,n,i){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Ce,this.group.add(this._axisGroup),!!_e(t)){this._axisGroup.add(t.axis.axisBuilder.group),O(an,function(u){t.get([u,"show"])&&rn[u](this,this._axisGroup,t,t.getCoordSysModel(),n)},this);var s=i&&i.type==="changeAxisOrder"&&i.isInitSort;s||Ya(o,this._axisGroup,t),r.prototype.render.call(this,t,a,n,i)}},e.prototype.remove=function(){tn(this)},e.type="cartesianAxis",e}(Qa),rn={splitLine:function(r,e,t,a,n){var i=t.axis;if(!i.scale.isBlank()){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),u=s.get("color"),l=o.get("showMinLine")!==!1,c=o.get("showMaxLine")!==!1;u=De(u)?u:[u];for(var f=a.coordinateSystem.getRect(),p=i.isHorizontal(),v=0,h=i.getTicksCoords({tickModel:o,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),d=[],y=[],m=s.getLineStyle(),g=0;g<h.length;g++){var b=i.toGlobalCoord(h[g].coord);if(!(g===0&&!l||g===h.length-1&&!c)){var C=h[g].tickValue;p?(d[0]=b,d[1]=f.y,y[0]=b,y[1]=f.y+f.height):(d[0]=f.x,d[1]=b,y[0]=f.x+f.width,y[1]=b);var S=v++%u.length,A=new ft({anid:C!=null?"line_"+C:null,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:y[0],y2:y[1]},style:ye({stroke:u[S]},m),silent:!0});ht(A.shape,m.lineWidth),e.add(A)}}}},minorSplitLine:function(r,e,t,a,n){var i=t.axis,o=t.getModel("minorSplitLine"),s=o.getModel("lineStyle"),u=a.coordinateSystem.getRect(),l=i.isHorizontal(),c=i.getMinorTicksCoords();if(c.length)for(var f=[],p=[],v=s.getLineStyle(),h=0;h<c.length;h++)for(var d=0;d<c[h].length;d++){var y=i.toGlobalCoord(c[h][d].coord);l?(f[0]=y,f[1]=u.y,p[0]=y,p[1]=u.y+u.height):(f[0]=u.x,f[1]=y,p[0]=u.x+u.width,p[1]=y);var m=new ft({anid:"minor_line_"+c[h][d].tickValue,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:p[0],y2:p[1]},style:v,silent:!0});ht(m.shape,v.lineWidth),e.add(m)}},splitArea:function(r,e,t,a,n){en(r,e,t,a)},breakArea:function(r,e,t,a,n){t.axis.scale}},na=function(r){H(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(ra),nn=function(r){H(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=na.type,t}return e.type="yAxis",e}(ra),on=function(r){H(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,a){this.group.removeAll(),t.get("show")&&this.group.add(new Ye({shape:t.coordinateSystem.getRect(),style:ye({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(er),Nt={offset:0};function sn(r){r.registerComponentView(on),r.registerComponentModel(zr),r.registerCoordinateSystem("cartesian2d",qr),wt(r,"x",Xe,Nt),wt(r,"y",Xe,Nt),r.registerComponentView(na),r.registerComponentView(nn),r.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function ln(r){Ze(sn),Ze(tr)}function ia(r,e){var t=r.mapDimensionsAll("defaultedLabel"),a=t.length;if(a===1){var n=pt(r,e,t[0]);return n!=null?n+"":null}else if(a){for(var i=[],o=0;o<t.length;o++)i.push(pt(r,e,t[o]));return i.join(" ")}}function un(r,e){var t=r.mapDimensionsAll("defaultedLabel");if(!De(e))return e+"";for(var a=[],n=0;n<t.length;n++){var i=r.getDimensionIndex(t[n]);i>=0&&a.push(e[i])}return a.join(" ")}var at=function(r){H(e,r);function e(t,a,n,i){var o=r.call(this)||this;return o.updateData(t,a,n,i),o}return e.prototype._createSymbol=function(t,a,n,i,o,s){this.removeAll();var u=We(t,-1,-1,2,2,null,s);u.attr({z2:He(o,100),culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),u.drift=vn,this._symbolType=t,this.add(u)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){ar(this.childAt(0))},e.prototype.downplay=function(){rr(this.childAt(0))},e.prototype.setZ=function(t,a){var n=this.childAt(0);n.zlevel=t,n.z=a},e.prototype.setDraggable=function(t,a){var n=this.childAt(0);n.draggable=t,n.cursor=!a&&t?"move":n.cursor},e.prototype.updateData=function(t,a,n,i){this.silent=!1;var o=t.getItemVisual(a,"symbol")||"circle",s=t.hostModel,u=e.getSymbolSize(t,a),l=e.getSymbolZ2(t,a),c=o!==this._symbolType,f=i&&i.disableAnimation;if(c){var p=t.getItemVisual(a,"symbolKeepAspect");this._createSymbol(o,t,a,u,l,p)}else{var v=this.childAt(0);v.silent=!1;var h={scaleX:u[0]/2,scaleY:u[1]/2};f?v.attr(h):Me(v,h,s,a),nr(v)}if(this._updateCommon(t,a,u,n,i),c){var v=this.childAt(0);if(!f){var h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:v.style.opacity}};v.scaleX=v.scaleY=0,v.style.opacity=0,Pe(v,h,s,a)}}f&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,a,n,i,o){var s=this.childAt(0),u=t.hostModel,l,c,f,p,v,h,d,y,m;if(i&&(l=i.emphasisItemStyle,c=i.blurItemStyle,f=i.selectItemStyle,p=i.focus,v=i.blurScope,d=i.labelStatesModels,y=i.hoverScale,m=i.cursorStyle,h=i.emphasisDisabled),!i||t.hasItemOption){var g=i&&i.itemModel?i.itemModel:t.getItemModel(a),b=g.getModel("emphasis");l=b.getModel("itemStyle").getItemStyle(),f=g.getModel(["select","itemStyle"]).getItemStyle(),c=g.getModel(["blur","itemStyle"]).getItemStyle(),p=b.get("focus"),v=b.get("blurScope"),h=b.get("disabled"),d=Qe(g),y=b.getShallow("scale"),m=g.getShallow("cursor")}var C=t.getItemVisual(a,"symbolRotate");s.attr("rotation",(C||0)*Math.PI/180||0);var S=ir(t.getItemVisual(a,"symbolOffset"),n);S&&(s.x=S[0],s.y=S[1]),m&&s.attr("cursor",m);var A=t.getItemVisual(a,"style"),_=A.fill;if(s instanceof or){var I=s.style;s.useStyle(dt({image:I.image,x:I.x,y:I.y,width:I.width,height:I.height},A))}else s.__isEmptyBrush?s.useStyle(dt({},A)):s.useStyle(A),s.style.decal=null,s.setColor(_,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var T=t.getItemVisual(a,"liftZ"),L=this._z2;T!=null?L==null&&(this._z2=s.z2,s.z2+=T):L!=null&&(s.z2=L,this._z2=null);var k=o&&o.useNameLabel;qt(s,d,{labelFetcher:u,labelDataIndex:a,defaultText:w,inheritColor:_,defaultOpacity:A.opacity});function w(z){return k?t.getName(z):ia(t,z)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var N=s.ensureState("emphasis");N.style=l,s.ensureState("select").style=f,s.ensureState("blur").style=c;var U=y==null||y===!0?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;N.scaleX=this._sizeX*U,N.scaleY=this._sizeY*U,this.setSymbolScale(1),$e(this,p,v,h)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,a,n){var i=this.childAt(0),o=Te(this).dataIndex,s=n&&n.animation;if(this.silent=i.silent=!0,n&&n.fadeLabel){var u=i.getTextContent();u&&gt(u,{style:{opacity:0}},a,{dataIndex:o,removeOpt:s,cb:function(){i.removeTextContent()}})}else i.removeTextContent();gt(i,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:o,cb:t,removeOpt:s})},e.getSymbolSize=function(t,a){return sr(t.getItemVisual(a,"symbolSize"))},e.getSymbolZ2=function(t,a){return t.getItemVisual(a,"z2")},e}(Ce);function vn(r,e){this.parent.drift(r,e)}function ze(r,e,t,a){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(a.isIgnore&&a.isIgnore(t))&&!(a.clipShape&&!a.clipShape.contain(e[0],e[1]))&&r.getItemVisual(t,"symbol")!=="none"}function Bt(r){return r!=null&&!Xt(r)&&(r={isIgnore:r}),r||{}}function Vt(r){var e=r.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:Qe(e),cursorStyle:e.get("cursor")}}var cn=function(){function r(e){this.group=new Ce,this._SymbolCtor=e||at}return r.prototype.updateData=function(e,t){this._progressiveEls=null,t=Bt(t);var a=this.group,n=e.hostModel,i=this._data,o=this._SymbolCtor,s=t.disableAnimation,u=Vt(e),l={disableAnimation:s},c=t.getSymbolPoint||function(f){return e.getItemLayout(f)};i||a.removeAll(),e.diff(i).add(function(f){var p=c(f);if(ze(e,p,f,t)){var v=new o(e,f,u,l);v.setPosition(p),e.setItemGraphicEl(f,v),a.add(v)}}).update(function(f,p){var v=i.getItemGraphicEl(p),h=c(f);if(!ze(e,h,f,t)){a.remove(v);return}var d=e.getItemVisual(f,"symbol")||"circle",y=v&&v.getSymbolType&&v.getSymbolType();if(!v||y&&y!==d)a.remove(v),v=new o(e,f,u,l),v.setPosition(h);else{v.updateData(e,f,u,l);var m={x:h[0],y:h[1]};s?v.attr(m):Me(v,m,n)}a.add(v),e.setItemGraphicEl(f,v)}).remove(function(f){var p=i.getItemGraphicEl(f);p&&p.fadeOut(function(){a.remove(p)},n)}).execute(),this._getSymbolPoint=c,this._data=e},r.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(a,n){var i=e._getSymbolPoint(n);a.setPosition(i),a.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Vt(e),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t,a){this._progressiveEls=[],a=Bt(a);function n(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var o=t.getItemLayout(i);if(ze(t,o,i,a)){var s=new this._SymbolCtor(t,i,this._seriesScope);s.traverse(n),s.setPosition(o),this.group.add(s),t.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},r.prototype.eachRendered=function(e){lr(this._progressiveEls||this.group,e)},r.prototype.remove=function(e){var t=this.group,a=this._data;a&&e?a.eachItemGraphicEl(function(n){n.fadeOut(function(){t.remove(n)},a.hostModel)}):t.removeAll()},r}();function fn(r,e){return r.type===e}var hn=function(r){H(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return Ir(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var a=new Ce,n=We("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);a.add(n),n.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=i==="none"?"circle":i,u=t.itemHeight*.8,l=We(s,(t.itemWidth-u)/2,(t.itemHeight-u)/2,u,u,t.itemStyle.fill);a.add(l),l.setStyle(t.itemStyle);var c=t.iconRotate==="inherit"?o:t.iconRotate||0;return l.rotation=c*Math.PI/180,l.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill=Y.color.neutral00,l.style.lineWidth=2),a},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:6,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(ur);function oa(r,e,t){var a=r.getBaseAxis(),n=r.getOtherAxis(a),i=pn(n,t),o=a.dim,s=n.dim,u=e.mapDimension(s),l=e.mapDimension(o),c=s==="x"||s==="radius"?1:0,f=le(r.dimensions,function(h){return e.mapDimension(h)}),p=!1,v=e.getCalculationInfo("stackResultDimension");return Ee(e,f[0])&&(p=!0,f[0]=v),Ee(e,f[1])&&(p=!0,f[1]=v),{dataDimsForPoint:f,valueStart:i,valueAxisDim:s,baseAxisDim:o,stacked:!!p,valueDim:u,baseDim:l,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function pn(r,e){var t=0,a=r.scale.getExtent();return e==="start"?t=a[0]:e==="end"?t=a[1]:Jt(e)&&!isNaN(e)?t=e:a[0]>0?t=a[0]:a[1]<0&&(t=a[1]),t}function sa(r,e,t,a){var n=NaN;r.stacked&&(n=t.get(t.getCalculationInfo("stackedOverDimension"),a)),isNaN(n)&&(n=r.valueStart);var i=r.baseDataOffset,o=[];return o[i]=t.get(r.baseDim,a),o[1-i]=n,e.dataToPoint(o)}function dn(r,e){var t=[];return e.diff(r).add(function(a){t.push({cmd:"+",idx:a})}).update(function(a,n){t.push({cmd:"=",idx:n,idx1:a})}).remove(function(a){t.push({cmd:"-",idx:a})}).execute(),t}function gn(r,e,t,a,n,i,o,s){for(var u=dn(r,e),l=[],c=[],f=[],p=[],v=[],h=[],d=[],y=oa(n,e,o),m=r.getLayout("points")||[],g=e.getLayout("points")||[],b=0;b<u.length;b++){var C=u[b],S=!0,A=void 0,_=void 0;switch(C.cmd){case"=":A=C.idx*2,_=C.idx1*2;var I=m[A],T=m[A+1],L=g[_],k=g[_+1];(isNaN(I)||isNaN(T))&&(I=L,T=k),l.push(I,T),c.push(L,k),f.push(t[A],t[A+1]),p.push(a[_],a[_+1]),d.push(e.getRawIndex(C.idx1));break;case"+":var w=C.idx,N=y.dataDimsForPoint,U=n.dataToPoint([e.get(N[0],w),e.get(N[1],w)]);_=w*2,l.push(U[0],U[1]),c.push(g[_],g[_+1]);var z=sa(y,n,e,w);f.push(z[0],z[1]),p.push(a[_],a[_+1]),d.push(e.getRawIndex(w));break;case"-":S=!1}S&&(v.push(C),h.push(h.length))}h.sort(function(G,be){return d[G]-d[be]});for(var D=l.length,x=ge(D),M=ge(D),P=ge(D),Z=ge(D),Q=[],b=0;b<h.length;b++){var ue=h[b],W=b*2,X=ue*2;x[W]=l[X],x[W+1]=l[X+1],M[W]=c[X],M[W+1]=c[X+1],P[W]=f[X],P[W+1]=f[X+1],Z[W]=p[X],Z[W+1]=p[X+1],Q[b]=v[ue]}return{current:x,next:M,stackedOnCurrent:P,stackedOnNext:Z,status:Q}}var ne=Math.min,ie=Math.max;function ce(r,e){return isNaN(r)||isNaN(e)}function Je(r,e,t,a,n,i,o,s,u){for(var l,c,f,p,v,h,d=t,y=0;y<a;y++){var m=e[d*2],g=e[d*2+1];if(d>=n||d<0)break;if(ce(m,g)){if(u){d+=i;continue}break}if(d===t)r[i>0?"moveTo":"lineTo"](m,g),f=m,p=g;else{var b=m-l,C=g-c;if(b*b+C*C<.5){d+=i;continue}if(o>0){for(var S=d+i,A=e[S*2],_=e[S*2+1];A===m&&_===g&&y<a;)y++,S+=i,d+=i,A=e[S*2],_=e[S*2+1],m=e[d*2],g=e[d*2+1],b=m-l,C=g-c;var I=y+1;if(u)for(;ce(A,_)&&I<a;)I++,S+=i,A=e[S*2],_=e[S*2+1];var T=.5,L=0,k=0,w=void 0,N=void 0;if(I>=a||ce(A,_))v=m,h=g;else{L=A-l,k=_-c;var U=m-l,z=A-m,D=g-c,x=_-g,M=void 0,P=void 0;if(s==="x"){M=Math.abs(U),P=Math.abs(z);var Z=L>0?1:-1;v=m-Z*M*o,h=g,w=m+Z*P*o,N=g}else if(s==="y"){M=Math.abs(D),P=Math.abs(x);var Q=k>0?1:-1;v=m,h=g-Q*M*o,w=m,N=g+Q*P*o}else M=Math.sqrt(U*U+D*D),P=Math.sqrt(z*z+x*x),T=P/(P+M),v=m-L*o*(1-T),h=g-k*o*(1-T),w=m+L*o*T,N=g+k*o*T,w=ne(w,ie(A,m)),N=ne(N,ie(_,g)),w=ie(w,ne(A,m)),N=ie(N,ne(_,g)),L=w-m,k=N-g,v=m-L*M/P,h=g-k*M/P,v=ne(v,ie(l,m)),h=ne(h,ie(c,g)),v=ie(v,ne(l,m)),h=ie(h,ne(c,g)),L=m-v,k=g-h,w=m+L*P/M,N=g+k*P/M}r.bezierCurveTo(f,p,v,h,m,g),f=w,p=N}else r.lineTo(m,g)}l=m,c=g,d+=i}return y}var la=function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r}(),mn=function(r){H(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-polyline",a}return e.prototype.getDefaultStyle=function(){return{stroke:Y.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new la},e.prototype.buildPath=function(t,a){var n=a.points,i=0,o=n.length/2;if(a.connectNulls){for(;o>0&&ce(n[o*2-2],n[o*2-1]);o--);for(;i<o&&ce(n[i*2],n[i*2+1]);i++);}for(;i<o;)i+=Je(t,n,i,o,o,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},e.prototype.getPointOn=function(t,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,i=n.data,o=vr.CMD,s,u,l=a==="x",c=[],f=0;f<i.length;){var p=i[f++],v=void 0,h=void 0,d=void 0,y=void 0,m=void 0,g=void 0,b=void 0;switch(p){case o.M:s=i[f++],u=i[f++];break;case o.L:if(v=i[f++],h=i[f++],b=l?(t-s)/(v-s):(t-u)/(h-u),b<=1&&b>=0){var C=l?(h-u)*b+u:(v-s)*b+s;return l?[t,C]:[C,t]}s=v,u=h;break;case o.C:v=i[f++],h=i[f++],d=i[f++],y=i[f++],m=i[f++],g=i[f++];var S=l?mt(s,v,d,m,t,c):mt(u,h,y,g,t,c);if(S>0)for(var A=0;A<S;A++){var _=c[A];if(_<=1&&_>=0){var C=l?yt(u,h,y,g,_):yt(s,v,d,m,_);return l?[t,C]:[C,t]}}s=m,u=g;break}}},e}(Kt),yn=function(r){H(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(la),bn=function(r){H(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-polygon",a}return e.prototype.getDefaultShape=function(){return new yn},e.prototype.buildPath=function(t,a){var n=a.points,i=a.stackedOnPoints,o=0,s=n.length/2,u=a.smoothMonotone;if(a.connectNulls){for(;s>0&&ce(n[s*2-2],n[s*2-1]);s--);for(;o<s&&ce(n[o*2],n[o*2+1]);o++);}for(;o<s;){var l=Je(t,n,o,s,s,1,a.smooth,u,a.connectNulls);Je(t,i,o+l-1,l,s,-1,a.stackedOnSmooth,u,a.connectNulls),o+=l+1,t.closePath()}},e}(Kt);function xn(r,e,t,a,n){var i=r.getArea(),o=i.x,s=i.y,u=i.width,l=i.height,c=t.get(["lineStyle","width"])||0;o-=c/2,s-=c/2,u+=c,l+=c,u=Math.ceil(u),o!==Math.floor(o)&&(o=Math.floor(o),u++);var f=new Ye({shape:{x:o,y:s,width:u,height:l}});if(e){var p=r.getBaseAxis(),v=p.isHorizontal(),h=p.inverse;v?(h&&(f.shape.x+=u),f.shape.width=0):(h||(f.shape.y+=l),f.shape.height=0);var d=me(n)?function(y){n(y,f)}:null;Pe(f,{shape:{width:u,height:l,x:o,y:s}},t,null,a,d)}return f}function Sn(r,e,t){var a=r.getArea(),n=re(a.r0,1),i=re(a.r,1),o=new cr({shape:{cx:re(r.cx,1),cy:re(r.cy,1),r0:n,r:i,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(e){var s=r.getBaseAxis().dim==="angle";s?o.shape.endAngle=a.startAngle:o.shape.r=n,Pe(o,{shape:{endAngle:a.endAngle,r:i}},t)}return o}function Gt(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return;return!0}}function zt(r){for(var e=1/0,t=1/0,a=-1/0,n=-1/0,i=0;i<r.length;){var o=r[i++],s=r[i++];isNaN(o)||(e=Math.min(o,e),a=Math.max(o,a)),isNaN(s)||(t=Math.min(s,t),n=Math.max(s,n))}return[[e,t],[a,n]]}function Rt(r,e){var t=zt(r),a=t[0],n=t[1],i=zt(e),o=i[0],s=i[1];return Math.max(Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]),Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]))}function Ft(r){return Jt(r)?r:r?.5:0}function An(r,e,t){if(!t.valueDim)return[];for(var a=e.count(),n=ge(a*2),i=0;i<a;i++){var o=sa(t,r,e,i);n[i*2]=o[0],n[i*2+1]=o[1]}return n}function oe(r,e,t,a,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,s=[],u=0,l=[],c=[],f=[],p=[];if(n){for(u=0;u<r.length;u+=2){var v=e||r;!isNaN(v[u])&&!isNaN(v[u+1])&&p.push(r[u],r[u+1])}r=p}for(u=0;u<r.length-2;u+=2)switch(f[0]=r[u+2],f[1]=r[u+3],c[0]=r[u],c[1]=r[u+1],s.push(c[0],c[1]),a){case"end":l[o]=f[o],l[1-o]=c[1-o],s.push(l[0],l[1]);break;case"middle":var h=(c[o]+f[o])/2,d=[];l[o]=d[o]=h,l[1-o]=c[1-o],d[1-o]=f[1-o],s.push(l[0],l[1]),s.push(d[0],d[1]);break;default:l[o]=c[o],l[1-o]=f[1-o],s.push(l[0],l[1])}return s.push(r[u++],r[u++]),s}function _n(r,e){var t=[],a=r.length,n,i;function o(c,f,p){var v=c.coord,h=(p-v)/(f.coord-v),d=mr(h,[c.color,f.color]);return{coord:p,color:d}}for(var s=0;s<a;s++){var u=r[s],l=u.coord;if(l<0)n=u;else if(l>e){i?t.push(o(i,u,e)):n&&t.push(o(n,u,0),o(n,u,e));break}else n&&(t.push(o(n,u,0)),n=null),t.push(u),i=u}return t}function Dn(r,e,t){var a=r.getVisual("visualMeta");if(!(!a||!a.length||!r.count())&&e.type==="cartesian2d"){for(var n,i,o=a.length-1;o>=0;o--){var s=r.getDimensionInfo(a[o].dimension);if(n=s&&s.coordDim,n==="x"||n==="y"){i=a[o];break}}if(i){var u=e.getAxis(n),l=le(i.stops,function(b){return{coord:u.toGlobalCoord(u.dataToCoord(b.value)),color:b.color}}),c=l.length,f=i.outerColors.slice();c&&l[0].coord>l[c-1].coord&&(l.reverse(),f.reverse());var p=_n(l,n==="x"?t.getWidth():t.getHeight()),v=p.length;if(!v&&c)return l[0].coord<0?f[1]?f[1]:l[c-1].color:f[0]?f[0]:l[0].color;var h=10,d=p[0].coord-h,y=p[v-1].coord+h,m=y-d;if(m<.001)return"transparent";O(p,function(b){b.offset=(b.coord-d)/m}),p.push({offset:v?p[v-1].offset:.5,color:f[1]||"transparent"}),p.unshift({offset:v?p[0].offset:.5,color:f[0]||"transparent"});var g=new gr(0,0,0,0,p,!0);return g[n]=d,g[n+"2"]=y,g}}}function Cn(r,e,t){var a=r.get("showAllSymbol"),n=a==="auto";if(!(a&&!n)){var i=t.getAxesByScale("ordinal")[0];if(i&&!(n&&Ln(i,e))){var o=e.mapDimension(i.dim),s={};return O(i.getViewLabels(),function(u){var l=i.scale.getRawOrdinalNumber(u.tickValue);s[l]=1}),function(u){return!s.hasOwnProperty(e.get(o,u))}}}}function Ln(r,e){var t=r.getExtent(),a=Math.abs(t[1]-t[0])/r.scale.count();isNaN(a)&&(a=0);for(var n=e.count(),i=Math.max(1,Math.round(n/5)),o=0;o<n;o+=i)if(at.getSymbolSize(e,o)[r.isHorizontal()?1:0]*1.5>a)return!1;return!0}function wn(r,e){return isNaN(r)||isNaN(e)}function Tn(r){for(var e=r.length/2;e>0&&wn(r[e*2-2],r[e*2-1]);e--);return e-1}function Ut(r,e){return[r[e*2],r[e*2+1]]}function kn(r,e,t){for(var a=r.length/2,n=t==="x"?0:1,i,o,s=0,u=-1,l=0;l<a;l++)if(o=r[l*2+n],!(isNaN(o)||isNaN(r[l*2+1-n]))){if(l===0){i=o;continue}if(i<=e&&o>=e||i>=e&&o<=e){u=l;break}s=l,i=o}return{range:[s,u],t:(e-i)/(o-i)}}function ua(r){if(r.get(["endLabel","show"]))return!0;for(var e=0;e<_t.length;e++)if(r.get([_t[e],"endLabel","show"]))return!0;return!1}function Re(r,e,t,a){if(fn(e,"cartesian2d")){var n=a.getModel("endLabel"),i=n.get("valueAnimation"),o=a.getData(),s={lastFrameIndex:0},u=ua(a)?function(v,h){r._endLabelOnDuring(v,h,o,s,i,n,e)}:null,l=e.getBaseAxis().isHorizontal(),c=xn(e,t,a,function(){var v=r._endLabel;v&&t&&s.originalX!=null&&v.attr({x:s.originalX,y:s.originalY})},u);if(!a.get("clip",!0)){var f=c.shape,p=Math.max(f.width,f.height);l?(f.y-=p,f.height+=p*2):(f.x-=p,f.width+=p*2)}return u&&u(1,c),c}else return Sn(e,t,a)}function Mn(r,e){var t=e.getBaseAxis(),a=t.isHorizontal(),n=t.inverse,i=a?n?"right":"left":"center",o=a?"middle":n?"top":"bottom";return{normal:{align:r.get("align")||i,verticalAlign:r.get("verticalAlign")||o}}}var En=function(r){H(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(){var t=new Ce,a=new cn;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=t,this._changePolyState=fr(this._changePolyState,this)},e.prototype.render=function(t,a,n){var i=t.coordinateSystem,o=this.group,s=t.getData(),u=t.getModel("lineStyle"),l=t.getModel("areaStyle"),c=s.getLayout("points")||[],f=i.type==="polar",p=this._coordSys,v=this._symbolDraw,h=this._polyline,d=this._polygon,y=this._lineGroup,m=!a.ssr&&t.get("animation"),g=!l.isEmpty(),b=l.get("origin"),C=oa(i,s,b),S=g&&An(i,s,C),A=t.get("showSymbol"),_=t.get("connectNulls"),I=A&&!f&&Cn(t,s,i),T=this._data;T&&T.eachItemGraphicEl(function(G,be){G.__temp&&(o.remove(G),T.setItemGraphicEl(be,null))}),A||v.remove(),o.add(y);var L=f?!1:t.get("step"),k;i&&i.getArea&&t.get("clip",!0)&&(k=i.getArea(),k.width!=null?(k.x-=.1,k.y-=.1,k.width+=.2,k.height+=.2):k.r0&&(k.r0-=.5,k.r+=.5)),this._clipShapeForSymbol=k;var w=Dn(s,i,n)||s.getVisual("style")[s.getVisual("drawType")];if(!(h&&p.type===i.type&&L===this._step))A&&v.updateData(s,{isIgnore:I,clipShape:k,disableAnimation:!0,getSymbolPoint:function(G){return[c[G*2],c[G*2+1]]}}),m&&this._initSymbolLabelAnimation(s,i,k),L&&(S&&(S=oe(S,c,i,L,_)),c=oe(c,null,i,L,_)),h=this._newPolyline(c),g?d=this._newPolygon(c,S):d&&(y.remove(d),d=this._polygon=null),f||this._initOrUpdateEndLabel(t,i,bt(w)),y.setClipPath(Re(this,i,!0,t));else{g&&!d?d=this._newPolygon(c,S):d&&!g&&(y.remove(d),d=this._polygon=null),f||this._initOrUpdateEndLabel(t,i,bt(w));var N=y.getClipPath();if(N){var U=Re(this,i,!1,t);Pe(N,{shape:U.shape},t)}else y.setClipPath(Re(this,i,!0,t));A&&v.updateData(s,{isIgnore:I,clipShape:k,disableAnimation:!0,getSymbolPoint:function(G){return[c[G*2],c[G*2+1]]}}),(!Gt(this._stackedOnPoints,S)||!Gt(this._points,c))&&(m?this._doUpdateAnimation(s,S,i,n,L,b,_):(L&&(S&&(S=oe(S,c,i,L,_)),c=oe(c,null,i,L,_)),h.setShape({points:c}),d&&d.setShape({points:c,stackedOnPoints:S})))}var z=t.getModel("emphasis"),D=z.get("focus"),x=z.get("blurScope"),M=z.get("disabled");if(h.useStyle(ye(u.getLineStyle(),{fill:"none",stroke:w,lineJoin:"bevel"})),xt(h,t,"lineStyle"),h.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var P=h.getState("emphasis").style;P.lineWidth=+h.style.lineWidth+1}Te(h).seriesIndex=t.seriesIndex,$e(h,D,x,M);var Z=Ft(t.get("smooth")),Q=t.get("smoothMonotone");if(h.setShape({smooth:Z,smoothMonotone:Q,connectNulls:_}),d){var ue=s.getCalculationInfo("stackedOnSeries"),W=0;d.useStyle(ye(l.getAreaStyle(),{fill:w,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),ue&&(W=Ft(ue.get("smooth"))),d.setShape({smooth:Z,stackedOnSmooth:W,smoothMonotone:Q,connectNulls:_}),xt(d,t,"areaStyle"),Te(d).seriesIndex=t.seriesIndex,$e(d,D,x,M)}var X=this._changePolyState;s.eachItemGraphicEl(function(G){G&&(G.onHoverStateChange=X)}),this._polyline.onHoverStateChange=X,this._data=s,this._coordSys=i,this._stackedOnPoints=S,this._points=c,this._step=L,this._valueOrigin=b,t.get("triggerLineEvent")&&(this.packEventData(t,h),d&&this.packEventData(t,d))},e.prototype.packEventData=function(t,a){Te(a).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,a,n,i){var o=t.getData(),s=St(o,i);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var u=o.getLayout("points"),l=o.getItemGraphicEl(s);if(!l){var c=u[s*2],f=u[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var p=t.get("zlevel")||0,v=t.get("z")||0;l=new at(o,s),l.x=c,l.y=f,l.setZ(p,v);var h=l.getSymbolPath().getTextContent();h&&(h.zlevel=p,h.z=v,h.z2=this._polyline.z2+1),l.__temp=!0,o.setItemGraphicEl(s,l),l.stopSymbolAnimation(!0),this.group.add(l)}l.highlight()}else Be.prototype.highlight.call(this,t,a,n,i)},e.prototype.downplay=function(t,a,n,i){var o=t.getData(),s=St(o,i);if(this._changePolyState("normal"),s!=null&&s>=0){var u=o.getItemGraphicEl(s);u&&(u.__temp?(o.setItemGraphicEl(s,null),this.group.remove(u)):u.downplay())}else Be.prototype.downplay.call(this,t,a,n,i)},e.prototype._changePolyState=function(t){var a=this._polygon;At(this._polyline,t),a&&At(a,t)},e.prototype._newPolyline=function(t){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new mn({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},e.prototype._newPolygon=function(t,a){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new bn({shape:{points:t,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,a,n){var i,o,s=a.getBaseAxis(),u=s.inverse;a.type==="cartesian2d"?(i=s.isHorizontal(),o=!1):a.type==="polar"&&(i=s.dim==="angle",o=!0);var l=t.hostModel,c=l.get("animationDuration");me(c)&&(c=c(null));var f=l.get("animationDelay")||0,p=me(f)?f(null):f;t.eachItemGraphicEl(function(v,h){var d=v;if(d){var y=[v.x,v.y],m=void 0,g=void 0,b=void 0;if(n)if(o){var C=n,S=a.pointToCoord(y);i?(m=C.startAngle,g=C.endAngle,b=-S[1]/180*Math.PI):(m=C.r0,g=C.r,b=S[0])}else{var A=n;i?(m=A.x,g=A.x+A.width,b=v.x):(m=A.y+A.height,g=A.y,b=v.y)}var _=g===m?0:(b-m)/(g-m);u&&(_=1-_);var I=me(f)?f(h):c*_+p,T=d.getSymbolPath(),L=T.getTextContent();d.attr({scaleX:0,scaleY:0}),d.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:I}),L&&L.animateFrom({style:{opacity:0}},{duration:300,delay:I}),T.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,a,n){var i=t.getModel("endLabel");if(ua(t)){var o=t.getData(),s=this._polyline,u=o.getLayout("points");if(!u){s.removeTextContent(),this._endLabel=null;return}var l=this._endLabel;l||(l=this._endLabel=new hr({z2:200}),l.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=Tn(u);c>=0&&(qt(s,Qe(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:c,defaultText:function(f,p,v){return v!=null?un(o,v):ia(o,f)},enableTextSetter:!0},Mn(i,a)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,a,n,i,o,s,u){var l=this._endLabel,c=this._polyline;if(l){t<1&&i.originalX==null&&(i.originalX=l.x,i.originalY=l.y);var f=n.getLayout("points"),p=n.hostModel,v=p.get("connectNulls"),h=s.get("precision"),d=s.get("distance")||0,y=u.getBaseAxis(),m=y.isHorizontal(),g=y.inverse,b=a.shape,C=g?m?b.x:b.y+b.height:m?b.x+b.width:b.y,S=(m?d:0)*(g?-1:1),A=(m?0:-d)*(g?-1:1),_=m?"x":"y",I=kn(f,C,_),T=I.range,L=T[1]-T[0],k=void 0;if(L>=1){if(L>1&&!v){var w=Ut(f,T[0]);l.attr({x:w[0]+S,y:w[1]+A}),o&&(k=p.getRawValue(T[0]))}else{var w=c.getPointOn(C,_);w&&l.attr({x:w[0]+S,y:w[1]+A});var N=p.getRawValue(T[0]),U=p.getRawValue(T[1]);o&&(k=pr(n,h,N,U,I.t))}i.lastFrameIndex=T[0]}else{var z=t===1||i.lastFrameIndex>0?T[0]:0,w=Ut(f,z);o&&(k=p.getRawValue(z)),l.attr({x:w[0]+S,y:w[1]+A})}if(o){var D=dr(l);typeof D.setLabelText=="function"&&D.setLabelText(k)}}},e.prototype._doUpdateAnimation=function(t,a,n,i,o,s,u){var l=this._polyline,c=this._polygon,f=t.hostModel,p=gn(this._data,t,this._stackedOnPoints,a,this._coordSys,n,this._valueOrigin),v=p.current,h=p.stackedOnCurrent,d=p.next,y=p.stackedOnNext;if(o&&(h=oe(p.stackedOnCurrent,p.current,n,o,u),v=oe(p.current,null,n,o,u),y=oe(p.stackedOnNext,p.next,n,o,u),d=oe(p.next,null,n,o,u)),Rt(v,d)>3e3||c&&Rt(h,y)>3e3){l.stopAnimation(),l.setShape({points:d}),c&&(c.stopAnimation(),c.setShape({points:d,stackedOnPoints:y}));return}l.shape.__points=p.current,l.shape.points=v;var m={shape:{points:d}};p.current!==v&&(m.shape.__points=p.next),l.stopAnimation(),Me(l,m,f),c&&(c.setShape({points:v,stackedOnPoints:h}),c.stopAnimation(),Me(c,{shape:{stackedOnPoints:y}},f),l.shape.points!==c.shape.points&&(c.shape.points=l.shape.points));for(var g=[],b=p.status,C=0;C<b.length;C++){var S=b[C].cmd;if(S==="="){var A=t.getItemGraphicEl(b[C].idx1);A&&g.push({el:A,ptIdx:C})}}l.animators&&l.animators.length&&l.animators[0].during(function(){c&&c.dirtyShape();for(var _=l.shape.__points,I=0;I<g.length;I++){var T=g[I].el,L=g[I].ptIdx*2;T.x=_[L],T.y=_[L+1],T.markRedraw()}})},e.prototype.remove=function(t){var a=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,o){i.__temp&&(a.remove(i),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Be);function In(r,e){return{seriesType:r,plan:yr(),reset:function(t){var a=t.getData(),n=t.coordinateSystem;if(t.pipelineContext,!!n){var i=le(n.dimensions,function(f){return a.mapDimension(f)}).slice(0,2),o=i.length,s=a.getCalculationInfo("stackResultDimension");Ee(a,i[0])&&(i[0]=s),Ee(a,i[1])&&(i[1]=s);var u=a.getStore(),l=a.getDimensionIndex(i[0]),c=a.getDimensionIndex(i[1]);return o&&{progress:function(f,p){for(var v=f.end-f.start,h=ge(v*o),d=[],y=[],m=f.start,g=0;m<f.end;m++){var b=void 0;if(o===1){var C=u.get(l,m);b=n.dataToPoint(C,null,y)}else d[0]=u.get(l,m),d[1]=u.get(c,m),b=n.dataToPoint(d,null,y);h[g++]=b[0],h[g++]=b[1]}p.setLayout("points",h)}}}}}}var Pn={average:function(r){for(var e=0,t=0,a=0;a<r.length;a++)isNaN(r[a])||(e+=r[a],t++);return t===0?NaN:e/t},sum:function(r){for(var e=0,t=0;t<r.length;t++)e+=r[t]||0;return e},max:function(r){for(var e=-1/0,t=0;t<r.length;t++)r[t]>e&&(e=r[t]);return isFinite(e)?e:NaN},min:function(r){for(var e=1/0,t=0;t<r.length;t++)r[t]<e&&(e=r[t]);return isFinite(e)?e:NaN},nearest:function(r){return r[0]}},On=function(r){return Math.round(r.length/2)};function Nn(r){return{seriesType:r,reset:function(e,t,a){var n=e.getData(),i=e.get("sampling"),o=e.coordinateSystem,s=n.count();if(s>10&&o.type==="cartesian2d"&&i){var u=o.getBaseAxis(),l=o.getOtherAxis(u),c=u.getExtent(),f=a.getDevicePixelRatio(),p=Math.abs(c[1]-c[0])*(f||1),v=Math.round(s/p);if(isFinite(v)&&v>1){i==="lttb"?e.setData(n.lttbDownSample(n.mapDimension(l.dim),1/v)):i==="minmax"&&e.setData(n.minmaxDownSample(n.mapDimension(l.dim),1/v));var h=void 0;br(i)?h=Pn[i]:me(i)&&(h=i),h&&e.setData(n.downSample(n.mapDimension(l.dim),1/v,h,On))}}}}}function Bn(r){r.registerChartView(En),r.registerSeriesModel(hn),r.registerLayout(In("line")),r.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),a=e.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",a)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,Nn("line"))}const Vn=Ke({__name:"LineChart",props:{dataMap:{}},setup(r){Ze([xr,ln,Bn,Sr,Ar]);const e=q(),t=r;let a;Se(e,o=>{if(o){a=_r(o);const s={grid:{left:"0",right:"0",top:60,bottom:"0"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:t.dataMap.map(u=>u.tag)},yAxis:{type:"value"},series:[{data:t.dataMap.map(u=>u.value),type:"line"}]};s&&a.setOption(s)}}),Se(()=>t.dataMap,o=>{a.setOption({xAxis:{type:"category",data:o.map(s=>s.tag)},yAxis:{type:"value"},series:[{data:o.map(s=>s.value),type:"line"}]})},{deep:!0});const n=q();let i;return Se(n,o=>{o?(i=new ResizeObserver(()=>{a&&a.resize()}),i.observe(o)):(i?.disconnect(),i=void 0)}),(o,s)=>(B(),$("div",{ref_key:"containerRef",ref:n,class:"container"},[s[0]||(s[0]=K("div",{class:"backgound"},null,-1)),K("div",{ref_key:"echartRef",ref:e,class:"payload"},null,512)],512))}}),Gn=et(Vn,[["__scopeId","data-v-ef61b680"]]),zn={class:"psy-test-group"},Rn={class:"will-download"},Fn=["onClick"],Un={class:"title"},Hn={class:"operators"},Zn={class:"range-area"},Wn={class:"range-label gap-12"},$n={class:"range-label gap-12"},Xn=Ke({__name:"PsyTest",props:{synthesisPsyHealth:{},anxiety:{},depression:{},traumaReaction:{},socialAnxiety:{},intellect:{},personality:{},insomnia:{},other:{}},emits:["add","edit"],setup(r,{emit:e}){const t=r,a=xe(()=>Object.keys(t).reduce((D,x)=>{const M=x,P=t[M];return Array.isArray(P)&&(D[M]=P.slice()),D},Object.create(null))),n=e,i=q({synthesisPsyHealth:-1,anxiety:-1,depression:-1,traumaReaction:-1,socialAnxiety:-1,intellect:-1,personality:-1,insomnia:-1,other:-1}),o=q({synthesisPsyHealth:-1,anxiety:-1,depression:-1,traumaReaction:-1,socialAnxiety:-1,intellect:-1,personality:-1,insomnia:-1,other:-1});for(const D in a.value){const x=D;Se(()=>a.value[x],M=>{!Array.isArray(M)||M.length===0||(i.value[x]===-1&&(i.value[x]=0),o.value[x]===-1&&(o.value[x]=M.length-1))},{deep:!0,immediate:!0})}const s=D=>o.value[D]>=i.value[D],u=(D,x)=>D+i.value[x],l=(D,x)=>o.value[x]===-1?D.slice():D.slice(0,o.value[x]+1),c=(D,x)=>i.value[x]===-1?D.slice():D.slice(i.value[x]),f=(D,x)=>D.slice(i.value[x],o.value[x]+1).map(P=>({tag:P.tag,value:P.value})),p=q(!1),v=q("add"),h=xe(()=>v.value==="download"),d=q(),y=q([]),m=q(-1),g=q("synthesisPsyHealth"),b=xe(()=>v.value==="add"?"新增数据":v.value==="edit"?"编辑数据":"下载文件"),C={createAt:"",tag:"",value:0,files:[]},S=q({...C});Se([y,m],([D,x])=>{D&&D[x]&&(S.value=D[x])});const A=q([]),_=xe({get(){return A.value.length===y.value.length},set(D){D?A.value=y.value.map(x=>x.tag):A.value=[]}}),I=xe(()=>y.value.filter(D=>A.value.includes(D.tag)).reduce((D,x)=>D.concat(x.files),[])),T=D=>{v.value="add",g.value=D,S.value={...C},p.value=!0},L=(D,x)=>{v.value="edit",m.value=0,g.value=x,y.value=D.map(M=>({...M,files:M.files.map(P=>({...P}))})),p.value=!0},k=D=>{v.value="download",m.value=0,y.value=D.slice(),p.value=!0,_.value=!1},w=()=>{S.value=C,p.value=!1},N=()=>{v.value==="add"?n("add",g.value,S.value):n("edit",g.value,m.value,S.value),p.value=!1,S.value=C},U=()=>{I.value.forEach(D=>{Cr(`/api/files/download/${D.filename}`,D.name)})},z=D=>{window.open(`/preview?filename=${encodeURIComponent(D.filename)}&type=${Lr(D.filename)}`)};return(D,x)=>{const M=ee("ElOption"),P=ee("ElSelect"),Z=ee("ElFormItem"),Q=ee("ElInput"),ue=ee("ElForm"),W=ee("ElCheckbox"),X=ee("ElCheckboxGroup"),G=ee("ElButton"),be=ee("ElDialog");return B(),$("div",zn,[F(be,{modelValue:p.value,"onUpdate:modelValue":x[6]||(x[6]=E=>p.value=E),"append-to-body":"","close-on-click-modal":!1,title:b.value},{footer:V(()=>[h.value?(B(),ae(G,{key:1,type:"danger",onClick:U},{default:V(()=>x[11]||(x[11]=[J("下载选中的文件",-1)])),_:1,__:[11]})):(B(),$(te,{key:0},[F(G,{onClick:w},{default:V(()=>x[9]||(x[9]=[J("取消",-1)])),_:1,__:[9]}),F(G,{type:"primary",onClick:N},{default:V(()=>x[10]||(x[10]=[J("确认",-1)])),_:1,__:[10]})],64))]),default:V(()=>[h.value?(B(),$(te,{key:1},[F(W,{modelValue:_.value,"onUpdate:modelValue":x[4]||(x[4]=E=>_.value=E)},{default:V(()=>x[7]||(x[7]=[J("全选",-1)])),_:1,__:[7]},8,["modelValue"]),F(X,{modelValue:A.value,"onUpdate:modelValue":x[5]||(x[5]=E=>A.value=E)},{default:V(()=>[(B(!0),$(te,null,fe(y.value,E=>(B(),ae(W,{key:E.tag,label:E.tag,value:E.tag},{default:V(()=>[J(he(E.tag),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),x[8]||(x[8]=K("div",{class:"download-area"},[J("将下载以下文件："),K("span",{class:"tip"},"(点击文件名可预览)")],-1)),K("div",Rn,[(B(!0),$(te,null,fe(I.value,(E,R)=>(B(),$("div",{class:"clickable download-file text-hoverable-primary",key:R,onClick:j=>z(E),title:"预览"},he(E.name),9,Fn))),128))])],64)):(B(),ae(ue,{key:0,class:"form",ref_key:"formRef",ref:d,model:S.value,"label-width":"auto"},{default:V(()=>[v.value==="edit"?(B(),ae(Z,{key:0,label:"要编辑的数据"},{default:V(()=>[F(P,{modelValue:m.value,"onUpdate:modelValue":x[0]||(x[0]=E=>m.value=E)},{default:V(()=>[(B(!0),$(te,null,fe(y.value,(E,R)=>(B(),ae(M,{value:R,label:E.tag},{default:V(()=>[J(he(E.tag),1)]),_:2},1032,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1})):Le("",!0),F(Z,{label:"数据名"},{default:V(()=>[F(Q,{modelValue:S.value.tag,"onUpdate:modelValue":x[1]||(x[1]=E=>S.value.tag=E)},null,8,["modelValue"])]),_:1}),F(Z,{label:"数据值"},{default:V(()=>[F(Q,{type:"number",modelValue:S.value.value,"onUpdate:modelValue":x[2]||(x[2]=E=>S.value.value=E)},null,8,["modelValue"])]),_:1}),F(Z,{label:"相关文件"},{default:V(()=>[F(Dr,{files:S.value.files,"onUpdate:files":x[3]||(x[3]=E=>S.value.files=E),"input-mode":"","has-download":!1},null,8,["files"])]),_:1})]),_:1},8,["model"]))]),_:1},8,["modelValue","title"]),(B(!0),$(te,null,fe(a.value,(E,R)=>(B(),$("div",{class:"test-section",key:R},[K("h4",Un,he(va(ha)[R]),1),K("div",Hn,[F(G,{type:"primary",onClick:j=>T(R)},{default:V(()=>x[12]||(x[12]=[J("新增数据",-1)])),_:2,__:[12]},1032,["onClick"]),F(G,{type:"warning",onClick:j=>L(E,R)},{default:V(()=>x[13]||(x[13]=[J("编辑数据",-1)])),_:2,__:[13]},1032,["onClick"]),F(G,{type:"success",onClick:j=>k(E)},{default:V(()=>x[14]||(x[14]=[J("下载相关文件",-1)])),_:2,__:[14]},1032,["onClick"])]),E.length?(B(),$(te,{key:0},[K("div",Zn,[K("label",Wn,[x[15]||(x[15]=K("span",{class:"range-title"},"数据起点：",-1)),F(P,{modelValue:i.value[R],"onUpdate:modelValue":j=>i.value[R]=j},{default:V(()=>[(B(!0),$(te,null,fe(l(E,R),(j,Oe)=>(B(),ae(M,{value:Oe,label:j.tag},{default:V(()=>[J(he(j.tag),1)]),_:2},1032,["value","label"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),K("label",$n,[x[16]||(x[16]=K("span",{class:"range-title"},"数据终点：",-1)),F(P,{modelValue:o.value[R],"onUpdate:modelValue":j=>o.value[R]=j},{default:V(()=>[(B(!0),$(te,null,fe(c(E,R),(j,Oe)=>(B(),ae(M,{value:u(Oe,R),label:j.tag},{default:V(()=>[J(he(j.tag),1)]),_:2},1032,["value","label"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),s(R)?(B(),ae(Gn,{key:0,class:"chart","data-map":f(E,R)},null,8,["data-map"])):Le("",!0)],64)):Le("",!0)]))),128))])}}}),jn=et(Xn,[["__scopeId","data-v-1a87e5d4"]]),qn={class:"psy-view"},Jn=Ke({__name:"PsyView",setup(r){const e=ca(),{id:t}=e.params;function a(s){const u=Ve();if(Array.isArray(u)){const l=u.find(c=>c.id===s);return l||null}else return null}const n=q(null);n.value=a(String(t));const i=(s,u)=>{const l=Ve();if(Array.isArray(l)){const c=l.find(f=>f.id===t);c&&(c.psyTest[s].push(u),Dt(l),n.value=a(String(t)))}},o=(s,u,l)=>{const c=Ve();if(Array.isArray(c)){const f=c.find(p=>p.id===t);f&&f.psyTest&&(f.psyTest[s][u]=l,Dt(c),n.value=a(String(t)))}};return(s,u)=>(B(),$("div",qn,[n.value?(B(),ae(jn,fa({key:0},n.value.psyTest,{onAdd:i,onEdit:o}),null,16)):Le("",!0)]))}}),ni=et(Jn,[["__scopeId","data-v-56c87fc2"]]);export{ni as default};
